{"ast":null,"code":"import _extends from '@babel/runtime/helpers/extends';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport React, { useRef, useMemo, useCallback, useEffect, createElement, useState, useContext, forwardRef } from 'react';\nimport { css, styled, keyframes } from 'styled-components';\nimport { getApiUrl as getApiUrl$1, fetchFromApi } from '@microlink/mql';\nexport { fetchFromApi } from '@microlink/mql';\nconst _excluded$8 = [\"accessibility\", \"debounce\", \"ellipsis\", \"is\", \"lines\", \"text\"];\nfunction ownKeys$4(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread$4(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys$4(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$4(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nconst l = _ref => {\n  let {\n      accessibility: l = !0,\n      debounce: o = 300,\n      ellipsis: u = \"…\",\n      is: c = \"div\",\n      lines: s = 3,\n      text: d\n    } = _ref,\n    v = _objectWithoutProperties(_ref, _excluded$8);\n  const a = useRef(null),\n    f = useRef(\".\"),\n    h = _objectSpread$4(_objectSpread$4({\n      ref: a\n    }, l ? {\n      title: d\n    } : {}), v),\n    g = useMemo(() => \"string\" == typeof d && d.length > 0, [d]),\n    m = useCallback(() => {\n      var e, t, n, r;\n      if (!g) return;\n      const i = e => {\n        f.current = e, null != a.current && (a.current.innerText = e);\n      };\n      i(\".\");\n      const l = ((null !== (t = null === (e = a.current) || void 0 === e ? void 0 : e.clientHeight) && void 0 !== t ? t : 0) + 1) * s + 1,\n        o = \"…\" === u ? 5 : 1.2 * u.length;\n      let c = 0,\n        v = 0,\n        h = d.length;\n      for (; c <= h;) {\n        v = Math.floor((c + h) / 2);\n        if (i(d.slice(0, v)), v === d.length) return;\n        (null !== (r = null === (n = a.current) || void 0 === n ? void 0 : n.clientHeight) && void 0 !== r ? r : 0) <= l ? c = v + 1 : h = v - 1;\n      }\n      i(d.slice(0, Math.max(v - o, 0)).trim() + u);\n    }, [u, g, s, d]);\n  return useEffect(() => {\n    m();\n    const e = ((e, t) => {\n      let n;\n      const r = () => {\n        n = void 0, e();\n      };\n      return () => {\n        const i = null == n;\n        clearTimeout(n), n = setTimeout(r, t), i && e();\n      };\n    })(m, o);\n    return window.addEventListener(\"resize\", e), () => window.removeEventListener(\"resize\", e);\n  }, [m, o]), g ? /*#__PURE__*/createElement(c, h, f.current) : null;\n};\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nvar src = () => /^https?:\\/\\/(localhost|0|10|127|192(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\\[::1?\\])/gi;\nvar localhostUrl = /*@__PURE__*/getDefaultExportFromCjs(src);\nconst isSSR = typeof window === 'undefined';\nconst castArray = value => [].concat(value);\nconst getPreferredMedia = (data, mediaProps) => {\n  let prefer;\n  for (let index = 0; index < mediaProps.length; index++) {\n    const key = mediaProps[index];\n    const value = data[key];\n    if (!isNil(value)) {\n      prefer = key;\n      break;\n    }\n  }\n  return prefer;\n};\nconst isFunction = fn => typeof fn === 'function';\nconst isObject = obj => typeof obj === 'object';\nconst isNil = value => value == null;\nconst getUrlPath = data => isObject(data) ? data.url : data;\nconst someProp = (data, props) => data[props.find(prop => !isNil(data[prop]))];\nconst media = {\n  mobile: function () {\n    return css`\n    @media (max-width: 48em) {\n      ${css(...arguments)};\n    }\n  `;\n  },\n  desktop: function () {\n    return css`\n    @media (min-width: 48em) {\n      ${css(...arguments)};\n    }\n  `;\n  }\n};\nconst getApiUrl = _ref => {\n  let {\n    apiKey,\n    contrast = false,\n    data,\n    endpoint,\n    force,\n    headers,\n    media,\n    prerender,\n    proxy,\n    ttl,\n    url\n  } = _ref;\n  return getApiUrl$1(url, {\n    apiKey,\n    audio: media.includes('audio'),\n    data,\n    endpoint,\n    force,\n    headers,\n    iframe: media.includes('iframe'),\n    palette: contrast,\n    prerender,\n    proxy,\n    screenshot: media.includes('screenshot'),\n    ttl,\n    video: media.includes('video')\n  });\n};\nconst isLarge = cardSize => cardSize === 'large';\nconst isSmall = cardSize => cardSize === 'small';\nconst imageProxy = url => localhostUrl().test(url) ? url : `https://images.weserv.nl/?${new URLSearchParams({\n  url,\n  default: url,\n  l: 9,\n  af: '',\n  il: '',\n  n: -1\n}).toString()}`;\nconst isLazySupported = !isSSR && 'IntersectionObserver' in window;\nconst formatSeconds = secs => {\n  const secsToNum = parseInt(secs, 10);\n  const hours = Math.floor(secsToNum / 3600);\n  const minutes = Math.floor(secsToNum / 60) % 60;\n  const seconds = secsToNum % 60;\n  return [hours, minutes, seconds].filter((v, i) => v > 0 || i > 0).map(v => v >= 10 ? v : `0${v}`).join(':');\n};\nconst clampNumber = (num, min, max) => {\n  switch (true) {\n    case num <= min:\n      return min;\n    case num >= max:\n      return max;\n    default:\n      return num;\n  }\n};\nconst BASE_CLASSNAME = 'microlink_card';\nconst CONTENT_BASE_CLASSNAME = `${BASE_CLASSNAME}__content`;\nconst MEDIA_BASE_CLASSNAME = `${BASE_CLASSNAME}__media`;\nconst CONTROLS_BASE_CLASSNAME = `${MEDIA_BASE_CLASSNAME}__controls`;\nconst classNames = {\n  main: BASE_CLASSNAME,\n  content: CONTENT_BASE_CLASSNAME,\n  title: `${CONTENT_BASE_CLASSNAME}_title`,\n  description: `${CONTENT_BASE_CLASSNAME}_description`,\n  url: `${CONTENT_BASE_CLASSNAME}_url`,\n  mediaWrapper: `${MEDIA_BASE_CLASSNAME}_wrapper`,\n  media: MEDIA_BASE_CLASSNAME,\n  image: `${MEDIA_BASE_CLASSNAME}_image`,\n  videoWrapper: `${MEDIA_BASE_CLASSNAME}_video_wrapper`,\n  video: `${MEDIA_BASE_CLASSNAME}_video`,\n  audioWrapper: `${MEDIA_BASE_CLASSNAME}_audio_wrapper`,\n  audio: `${MEDIA_BASE_CLASSNAME}_audio`,\n  mediaControls: CONTROLS_BASE_CLASSNAME,\n  playbackControl: `${CONTROLS_BASE_CLASSNAME}_playback`,\n  volumeControl: `${CONTROLS_BASE_CLASSNAME}_volume`,\n  rwControl: `${CONTROLS_BASE_CLASSNAME}_rewind`,\n  ffwControl: `${CONTROLS_BASE_CLASSNAME}_fast_forward`,\n  rateControl: `${CONTROLS_BASE_CLASSNAME}_rate`,\n  progressBar: `${CONTROLS_BASE_CLASSNAME}_progress_bar`,\n  progressTime: `${CONTROLS_BASE_CLASSNAME}_progress_time`,\n  spinner: `${CONTROLS_BASE_CLASSNAME}_spinner`,\n  iframe: `${BASE_CLASSNAME}__iframe`\n};\nconst _excluded$7 = [\"useNanoClamp\", \"children\"];\nfunction ownKeys$3(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread$3(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys$3(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$3(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nconst Clamp = _ref => {\n  let {\n    children,\n    className,\n    lines\n  } = _ref;\n  return isNil(children) ? null : /*#__PURE__*/React.createElement(l, {\n    className: className,\n    lines: lines,\n    text: children,\n    is: \"p\"\n  });\n};\nconst StyledClamp = styled(Clamp)`\n  &&& {\n    text-align: inherit;\n    font-weight: inherit;\n    font-family: inherit;\n    color: inherit;\n    margin: 0;\n\n    ${_ref2 => {\n  let {\n    $useNanoClamp\n  } = _ref2;\n  return !$useNanoClamp && css`\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      `;\n}}\n  }\n`;\nconst CardText = _ref3 => {\n  let {\n      useNanoClamp = true,\n      children\n    } = _ref3,\n    props = _objectWithoutProperties(_ref3, _excluded$7);\n  const textProps = useNanoClamp ? props : _objectSpread$3(_objectSpread$3({}, props), {}, {\n    as: 'p',\n    title: children\n  });\n  return /*#__PURE__*/React.createElement(StyledClamp, _extends({\n    $useNanoClamp: useNanoClamp\n  }, textProps), children);\n};\nconst speed = {\n  short: '100ms',\n  medium: '150ms',\n  long: '300ms'\n};\nconst animation = {\n  short: 'cubic-bezier(.25,.8,.25,1)',\n  medium: 'cubic-bezier(.25,.8,.25,1)',\n  long: 'cubic-bezier(.4, 0, .2, 1)'\n};\nconst createTransition = (properties, s) => {\n  const suffix = `${speed[s]} ${animation[s]}`;\n  return properties.map(property => `${property} ${suffix}`).join(', ');\n};\nconst transition = {\n  short: function () {\n    for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n      properties[_key] = arguments[_key];\n    }\n    return createTransition(properties, 'short');\n  },\n  medium: function () {\n    for (var _len2 = arguments.length, properties = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      properties[_key2] = arguments[_key2];\n    }\n    return createTransition(properties, 'medium');\n  },\n  long: function () {\n    for (var _len3 = arguments.length, properties = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      properties[_key3] = arguments[_key3];\n    }\n    return createTransition(properties, 'long');\n  }\n};\n\n// https://primer.style/design/foundations/typography\nconst font = {\n  sans: \"InterUI, -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif\",\n  mono: \"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace\"\n};\nconst _excluded$6 = [\"autoPlay\", \"children\", \"controls\", \"loop\", \"mediaRef\", \"muted\", \"playsInline\", \"size\"];\nfunction ownKeys$2(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread$2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys$2(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$2(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nconst initialState = {};\nconst GlobalContext = /*#__PURE__*/React.createContext(initialState);\nconst GlobalState = _ref => {\n  let {\n      autoPlay,\n      children,\n      controls,\n      loop,\n      mediaRef,\n      muted,\n      playsInline,\n      size\n    } = _ref,\n    rest = _objectWithoutProperties(_ref, _excluded$6);\n  const [state, setState] = useState(initialState);\n  const updateState = useCallback(newState => setState(currentState => _objectSpread$2(_objectSpread$2({}, currentState), newState)), []);\n  const props = useMemo(() => ({\n    autoPlay,\n    controls,\n    loop,\n    mediaRef,\n    muted,\n    playsInline,\n    size\n  }), [autoPlay, controls, loop, mediaRef, muted, playsInline, size]);\n  const values = useMemo(() => ({\n    props,\n    state,\n    updateState\n  }), [props, state, updateState]);\n  return /*#__PURE__*/React.createElement(GlobalContext.Provider, {\n    value: values\n  }, children(rest));\n};\n\n/* global URL */\n\nconst REGEX_STRIP_WWW = /^www\\./;\nconst BADGE_WIDTH = '16px';\nconst BADGE_HEIGHT = '12px';\nconst getHostname = href => {\n  if (isNil(href)) return '';\n  const {\n    hostname\n  } = new URL(href);\n  return hostname.replace(REGEX_STRIP_WWW, '');\n};\nconst mobileDescriptionStyle = css`\n  ${media.mobile`\n    > p {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  `};\n`;\nconst Content = styled('div').attrs({\n  className: classNames.content\n})`\n  display: flex;\n  padding: 10px 15px;\n  min-width: 0;\n  box-sizing: border-box;\n  ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return css`\n    flex: ${!isLarge($cardSize) ? 1 : '0 0 125px'};\n    justify-content: ${!isSmall($cardSize) ? 'space-around' : 'space-between'};\n    flex-direction: ${!isSmall($cardSize) ? 'column' : 'row'};\n    align-items: ${!isSmall($cardSize) ? 'stretch' : 'center'};\n  `;\n}};\n`;\nconst Header = styled('header').attrs({\n  className: classNames.title\n})`\n  text-align: left;\n  font-weight: bold;\n  margin: 0;\n  width: 100%;\n  ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return css`\n    flex-grow: ${!isSmall($cardSize) ? 1.2 : 0.8};\n    font-size: ${!isSmall($cardSize) ? '16px' : '15px'};\n\n    ${isSmall($cardSize) && css`\n      min-width: 0;\n      padding-right: 14px;\n    `}\n  `;\n}}\n`;\nconst Description = styled('div').attrs({\n  className: classNames.description\n})`\n  text-align: left;\n  font-size: 14px;\n  flex-grow: 2;\n  margin: auto 0;\n  line-height: 18px;\n  font-weight: normal;\n  ${_ref3 => {\n  let {\n    $cardSize\n  } = _ref3;\n  return !isLarge($cardSize) && mobileDescriptionStyle;\n}};\n`;\nconst Footer = styled('footer').attrs({\n  className: classNames.url\n})`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  text-align: left;\n  margin: 0;\n  flex-grow: 0;\n  font-weight: normal;\n  ${_ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return css`\n    font-size: ${!isSmall($cardSize) ? '12px' : '10px'};\n    ${!isSmall($cardSize) && 'width: 100%;'}\n  `;\n}};\n`;\nconst Author = styled(CardText)`\n  opacity: 0.75;\n  transition: ${transition.medium('opacity')};\n  will-change: opacity;\n\n  .${classNames.main}:hover & {\n    opacity: 1;\n  }\n`;\nconst PoweredBy = styled('span').attrs({\n  title: 'microlink.io'\n})`\n  background: url('https://cdn.microlink.io/logo/logo.svg') no-repeat center\n    center;\n  display: block;\n  margin-left: 15px;\n  transition: ${transition.medium('filter', 'opacity')};\n  will-change: filter, opacity;\n  &:not(:hover) {\n    filter: grayscale(100%);\n    opacity: 0.75;\n  }\n\n  min-width: ${BADGE_WIDTH};\n  width: ${BADGE_WIDTH};\n  background-size: ${BADGE_WIDTH};\n  height: ${BADGE_HEIGHT};\n`;\nconst CardContent = () => {\n  const {\n    state: {\n      description,\n      title,\n      url\n    },\n    props: {\n      size\n    }\n  } = useContext(GlobalContext);\n  const isSmallCard = isSmall(size);\n  const formattedUrl = useMemo(() => getHostname(url), [url]);\n  const handleOnClick = useCallback(e => {\n    e.preventDefault();\n    window.open('https://www.microlink.io', '_blank');\n  }, []);\n  return /*#__PURE__*/React.createElement(Content, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(Header, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(CardText, {\n    $useNanoClamp: false\n  }, title)), !isSmallCard && /*#__PURE__*/React.createElement(Description, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(CardText, {\n    lines: 2\n  }, description)), /*#__PURE__*/React.createElement(Footer, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(Author, {\n    $useNanoClamp: false\n  }, formattedUrl), /*#__PURE__*/React.createElement(PoweredBy, {\n    onClick: handleOnClick\n  })));\n};\nconst emptyStatePulse = keyframes`\n  0% {\n    background: #e1e8ed;\n  }\n  70% {\n    background: #cdd4d8;\n  }\n  100% {\n    background: #e1e8ed;\n  }\n`;\nconst emptyStateImagePulse = keyframes`\n  0% {\n    background: #e1e8ed;\n  }\n  70% {\n    background: #dce3e8;\n  }\n  100% {\n    background: #e1e8ed;\n  }\n`;\nconst emptyStateAnimation = css`\n  animation: ${emptyStatePulse} .75s linear infinite;\n`;\nconst emptyStateImageAnimation = css`\n  animation: ${emptyStateImagePulse} 1.25s linear infinite;\n`;\nconst ImageLoadCatcher = styled('img')`\n  height: 1px;\n  width: 1px;\n  position: absolute;\n  z-index: -1;\n`;\nconst loadingOverlay = css`\n  &::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background: #e1e8ed;\n    z-index: 1;\n    transition: ${transition.medium('opacity', 'visibility')};\n    will-change: opacity;\n\n    ${_ref => {\n  let {\n    $isLoading\n  } = _ref;\n  return css`\n      opacity: ${$isLoading ? 1 : 0};\n      visibility: ${$isLoading ? 'visible' : 'hidden'};\n    `;\n}};\n  }\n`;\nconst mediaSizeStyles = {\n  small: css`\n    flex: 0 0 48px;\n  `,\n  normal: css`\n    flex: 0 0 125px;\n\n    ${media.mobile`\n      flex: 0 0 92px;\n    `}\n  `,\n  large: css`\n    flex: 1;\n\n    &::before {\n      padding-bottom: 0;\n    }\n  `\n};\nconst StyledWrap = styled('div')`\n  background: transparent no-repeat center center / cover;\n  display: block;\n  overflow: hidden;\n  height: auto;\n  position: relative;\n\n  &::before {\n    content: '';\n    padding-bottom: 100%;\n    display: block;\n  }\n\n  ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return mediaSizeStyles[$cardSize];\n}};\n\n  ${loadingOverlay};\n`;\nconst Wrap$1 = props => {\n  const {\n    props: {\n      size\n    }\n  } = useContext(GlobalContext);\n  return /*#__PURE__*/React.createElement(StyledWrap, _extends({\n    $cardSize: size\n  }, props));\n};\nconst ImageWrap = styled(Wrap$1).attrs({\n  className: `${classNames.media} ${classNames.image}`\n})`\n  background-image: ${_ref => {\n  let {\n    url\n  } = _ref;\n  return url ? `url('${imageProxy(url)}')` : '';\n}};\n`;\nconst ImageComponent = props => {\n  const {\n    state: {\n      imageUrl\n    }\n  } = useContext(GlobalContext);\n  return /*#__PURE__*/React.createElement(ImageWrap, _extends({\n    url: imageUrl\n  }, props));\n};\nvar _FooterEmpty;\nconst MediaEmpty = styled(ImageComponent)`\n  ${emptyStateImageAnimation};\n`;\nconst HeaderEmpty = styled('span')`\n  opacity: 0.8;\n  height: 16px;\n  width: ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return !isSmall($cardSize) ? '60%' : '75%';\n}};\n  display: block;\n  background: #e1e8ed;\n  margin: ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return !isSmall($cardSize) ? '2px 0 8px' : '0 20px 0 0';\n}};\n  ${emptyStateAnimation};\n\n  ${_ref3 => {\n  let {\n    $cardSize\n  } = _ref3;\n  return !isLarge($cardSize) && `\n    height: 15px;\n  `;\n}};\n`;\nconst DescriptionEmpty = styled('span')`\n  opacity: 0.8;\n  height: 14px;\n  width: 95%;\n  display: block;\n  position: relative;\n  ${emptyStateAnimation};\n  animation-delay: 0.125s;\n`;\nconst FooterEmpty = styled('span')`\n  opacity: 0.8;\n  height: 12px;\n  width: 30%;\n  display: block;\n  ${emptyStateAnimation} animation-delay: .25s;\n\n  ${_ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return !isLarge($cardSize) && `\n    height: 10px;\n  `;\n}};\n`;\nconst CardEmptyState = () => {\n  const {\n    props: {\n      size\n    }\n  } = useContext(GlobalContext);\n  const isSmallCard = isSmall(size);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MediaEmpty, {\n    $cardSize: size\n  }), /*#__PURE__*/React.createElement(Content, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(HeaderEmpty, {\n    $cardSize: size\n  }), !isSmallCard ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DescriptionEmpty, {\n    $cardSize: size\n  }), /*#__PURE__*/React.createElement(DescriptionEmpty, {\n    $cardSize: size,\n    style: {\n      marginBottom: '12px'\n    }\n  })) : null, _FooterEmpty || (_FooterEmpty = /*#__PURE__*/React.createElement(FooterEmpty, null))));\n};\nconst MediaButton = styled('div')`\n  backface-visibility: hidden;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));\n  transition: ${transition.short('transform')};\n  will-change: transform;\n\n  > svg {\n    display: block;\n  }\n\n  &:active:not(:focus) {\n    transform: scale(0.9);\n  }\n`;\nvar _path$2, _path2$2;\nconst VolumeMute = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 14 14\"\n}, props), _path$2 || (_path$2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  d: \"M15.5 6.205l-.705-.705L13 7.295 11.205 5.5l-.705.705L12.295 8 10.5 9.795l.705.705L13 8.705l1.795 1.795.705-.705L13.705 8 15.5 6.205zM9 15a.5.5 0 01-.355-.15L4.835 11H1.5a.5.5 0 01-.5-.5v-5a.5.5 0 01.5-.5h3.335l3.81-3.85a.5.5 0 01.705 0 .5.5 0 01.15.35v13a.5.5 0 01-.5.5z\",\n  transform: \"translate(-1 -1)\"\n})));\nconst VolumeUp = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 14 14\"\n}, props), _path2$2 || (_path2$2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  d: \"M13.58 4.04l-.765.645a5 5 0 01-.145 6.615l.735.7a6 6 0 00.175-7.94v-.02zM10.79 6a3 3 0 01-.09 3.97l.735.68a4 4 0 00.115-5.295L10.79 6zM9 15a.5.5 0 01-.355-.15L4.835 11H1.5a.5.5 0 01-.5-.5v-5a.5.5 0 01.5-.5h3.335l3.81-3.85a.5.5 0 01.705 0 .5.5 0 01.15.35v13a.5.5 0 01-.5.5z\",\n  transform: \"translate(-1 -1)\"\n})));\nconst BottomControls = styled('div')`\n  z-index: 2;\n  position: absolute;\n  bottom: ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return isLarge($cardSize) ? 18 : 14;\n}}px;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: ${transition.medium('opacity')};\n  will-change: opacity;\n`;\nconst VolumeIcon = styled('svg')`\n  stroke: #fff;\n`;\nconst VolumeButton = styled(MediaButton).attrs({\n  className: classNames.volumeControl\n})`\n  ${VolumeIcon} {\n    width: ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return isLarge($cardSize) ? 16 : 14;\n}}px;\n    height: ${_ref3 => {\n  let {\n    $cardSize\n  } = _ref3;\n  return isLarge($cardSize) ? 16 : 14;\n}}px;\n\n    ${_ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return !isLarge($cardSize) && media.mobile`\n      width: 12px;\n      height: 12px;\n    `;\n}}\n  }\n`;\nconst PlaybackRateButton = styled(MediaButton).attrs({\n  className: classNames.rateControl\n})`\n  font-size: ${_ref5 => {\n  let {\n    $cardSize\n  } = _ref5;\n  return isLarge($cardSize) ? 12 : 10;\n}}px;\n  min-width: ${_ref6 => {\n  let {\n    $cardSize\n  } = _ref6;\n  return isLarge($cardSize) ? 33 : 28;\n}}px;\n  line-height: 1;\n  font-weight: bold;\n  border: 1.5px solid #fff;\n  border-radius: 9999px;\n  padding: 1px 5px;\n  text-align: center;\n  color: #fff;\n  margin-left: 10px;\n\n  ${_ref7 => {\n  let {\n    $cardSize\n  } = _ref7;\n  return !isLarge($cardSize) && media.mobile`\n    font-size: 8px;\n    margin-left: 8px;\n    min-width: 23px;\n  `;\n}}\n`;\nconst TimeLabel = styled('span').attrs({\n  className: classNames.progressTime\n})`\n  margin: ${_ref8 => {\n  let {\n    right\n  } = _ref8;\n  return !right ? '0 auto 0 0' : '0 0 0 auto';\n}};\n  font-family: ${font.mono};\n  font-size: 12px;\n  padding: 0 16px;\n  color: #fff;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n`;\nconst FooterControls = _ref9 => {\n  let {\n    $cardSize,\n    currentTime,\n    endTime,\n    isMuted,\n    onMuteClick,\n    onPlaybackRateClick,\n    playbackRate\n  } = _ref9;\n  const VolumeComponent = useMemo(() => isMuted ? VolumeMute : VolumeUp, [isMuted]);\n  const isLargeCard = useMemo(() => isLarge($cardSize), [$cardSize]);\n  return /*#__PURE__*/React.createElement(BottomControls, {\n    $cardSize: $cardSize\n  }, isLargeCard && /*#__PURE__*/React.createElement(TimeLabel, null, currentTime), /*#__PURE__*/React.createElement(VolumeButton, {\n    title: isMuted ? 'Unmute' : 'Mute',\n    $cardSize: $cardSize,\n    onClick: onMuteClick\n  }, /*#__PURE__*/React.createElement(VolumeIcon, {\n    as: VolumeComponent\n  })), /*#__PURE__*/React.createElement(PlaybackRateButton, {\n    title: \"Playback Rate\",\n    $cardSize: $cardSize,\n    onClick: onPlaybackRateClick\n  }, /*#__PURE__*/React.createElement(\"span\", null, playbackRate, \"x\")), isLargeCard && /*#__PURE__*/React.createElement(TimeLabel, {\n    right: true\n  }, endTime));\n};\nconst _excluded$5 = [\"isPlaying\"];\nvar _path$1, _path2$1;\nconst Pause = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 16 20\"\n}, props), _path$1 || (_path$1 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  d: \"M12 6h-2a2 2 0 00-2 2v16a2 2 0 002 2h2a2 2 0 002-2V8a2 2 0 00-2-2zm10 0h-2a2 2 0 00-2 2v16a2 2 0 002 2h2a2 2 0 002-2V8a2 2 0 00-2-2z\",\n  transform: \"translate(-8 -6)\"\n})));\nconst Play = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 21 24\"\n}, props), _path2$1 || (_path2$1 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  d: \"M7 28a1 1 0 01-1-1V5a1 1 0 011.501-.865l19 11a1 1 0 010 1.73l-19 11A.998.998 0 017 28z\",\n  transform: \"translate(-6 -4)\"\n})));\nconst iconSizes = {\n  large: '50px',\n  normal: '35px',\n  small: '20px'\n};\nconst PlaybackIcon = styled('svg')`\n  stroke: #fff;\n`;\nconst PlaybackButtonWrap = styled(MediaButton).attrs({\n  className: classNames.playbackControl\n})`\n  ${PlaybackIcon} {\n    ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return css`\n      width: ${iconSizes[$cardSize]};\n      height: ${iconSizes[$cardSize]};\n      padding: ${isLarge($cardSize) ? 0 : '8px'};\n\n      ${!isLarge($cardSize) && !isSmall($cardSize) && media.mobile`\n        width: calc(${iconSizes.small} * 1.2);\n        height: calc(${iconSizes.small} * 1.2);\n      `}\n    `;\n}}\n  }\n`;\nconst PlaybackButton = _ref2 => {\n  let {\n      isPlaying\n    } = _ref2,\n    props = _objectWithoutProperties(_ref2, _excluded$5);\n  const PlaybackComponent = useMemo(() => isPlaying ? Pause : Play, [isPlaying]);\n  return /*#__PURE__*/React.createElement(PlaybackButtonWrap, _extends({\n    title: isPlaying ? 'Pause' : 'Play'\n  }, props), /*#__PURE__*/React.createElement(PlaybackIcon, {\n    as: PlaybackComponent\n  }));\n};\nconst SCRUBBER_SIZE = 12;\nconst scrubberSizeScales = {\n  normal: 0.8,\n  small: 0.9\n};\nconst getScrubberSize = size => Math.floor(SCRUBBER_SIZE * (scrubberSizeScales[size] || 1));\nconst Scrubber = styled('div').attrs(_ref => {\n  let {\n    isVisible,\n    positionX\n  } = _ref;\n  return {\n    style: {\n      left: positionX,\n      transform: `scale(${isVisible ? 1 : 0.5}) translate(-50%, -50%)`,\n      opacity: isVisible ? 1 : 0,\n      visibility: isVisible ? 'visible' : 'hidden'\n    }\n  };\n})`\n  position: absolute;\n  top: 50%;\n  background: #ffffff;\n  border-radius: 50%;\n  transform-origin: center center;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);\n  transition: ${transition.short('transform', 'opacity', 'visibility')};\n  will-change: left, transform, opacity, visibility;\n  backface-visibility: hidden;\n  z-index: 3;\n\n  ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  const scrubberSize = getScrubberSize($cardSize);\n  return css`\n      height: ${scrubberSize}px;\n      width: ${scrubberSize}px;\n    `;\n}}\n`;\nconst _excluded$4 = [\"isDragging\", \"isVisible\", \"label\", \"positionX\", \"size\"];\nconst BASE_FONT_SIZE = 11;\nconst sizeScales$1 = {\n  normal: 0.8\n};\nconst getMarkerFontSize = size => BASE_FONT_SIZE * (sizeScales$1[size] || 1);\nconst TooltipBase = styled('span').attrs(_ref => {\n  let {\n    position,\n    isDragging,\n    visible\n  } = _ref;\n  return {\n    style: {\n      left: `${position}px`,\n      top: visible ? '-4px' : '0px',\n      visibility: visible ? 'visible' : 'hidden',\n      opacity: visible ? 1 : 0,\n      transform: `translate(-50%, ${!isDragging ? -100 : -110}%)`\n    }\n  };\n})`\n  position: absolute;\n  background: rgba(24, 25, 25, 0.75);\n  color: #fff;\n  text-shadow: 0 1px 2px rgba(24, 25, 25, 0.15);\n  padding: 2px 3px;\n  border-radius: 4px;\n  font-family: ${font.mono};\n  font-size: ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return getMarkerFontSize($cardSize);\n}}px;\n  line-height: 1;\n  transition: ${transition.medium('opacity', 'visibility', 'transform')},\n    ${transition.long('top')};\n  will-change: top, left, visibility, opacity, transform;\n  backface-visibility: hidden;\n`;\nconst Tooltip = /*#__PURE__*/forwardRef((_ref3, ref) => {\n  let {\n      isDragging,\n      isVisible,\n      label,\n      positionX,\n      size\n    } = _ref3,\n    props = _objectWithoutProperties(_ref3, _excluded$4);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TooltipBase, _extends({\n    visible: isVisible,\n    position: positionX,\n    $cardSize: size,\n    ref: ref,\n    isDragging: isDragging\n  }, props), label));\n});\nTooltip.displayName = 'Tooltip';\nconst _excluded$3 = [\"key\"];\nconst HEIGHT$1 = 6;\nconst PADDING = 6;\nconst heightScales = {\n  normal: 0.7,\n  small: 0.6\n};\nconst activeHeightScales = {\n  small: 0.9,\n  large: 1.4\n};\nconst getProgressBarHeight = size => Math.floor(HEIGHT$1 * (heightScales[size] || 1));\nconst getProgressBarActiveHeight = size => Math.floor(HEIGHT$1 * (activeHeightScales[size] || 1));\nconst OuterWrap$1 = styled('div').attrs(() => ({\n  className: classNames.progressBar\n}))`\n  position: relative;\n  padding: ${PADDING}px ${PADDING / 2}px ${PADDING / 2}px;\n  z-index: 2;\n  backface-visibility: hidden;\n`;\nconst BarsWrap = styled('div').attrs(_ref => {\n  let {\n    $cardSize,\n    isDragging\n  } = _ref;\n  if (isDragging) {\n    const activeHeight = getProgressBarActiveHeight($cardSize);\n    return {\n      style: {\n        height: `${activeHeight}px`\n      }\n    };\n  }\n  return {};\n})`\n  background: transparent;\n  border-radius: 9999px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  background: rgba(255, 255, 255, 0.15);\n  transition: ${transition.short('height')};\n  will-change: height;\n  pointer-events: none;\n  position: relative;\n\n  ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  const height = getProgressBarHeight($cardSize);\n  const activeHeight = getProgressBarActiveHeight($cardSize);\n  return css`\n      height: ${height}px;\n\n      ${OuterWrap$1}:hover & {\n        height: ${activeHeight}px;\n      }\n    `;\n}}\n`;\nconst ProgressLine = styled('div')`\n  border-radius: inherit;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n`;\nconst ProgressMask = styled('div').attrs(_ref3 => {\n  let {\n    maskScale\n  } = _ref3;\n  return {\n    style: {\n      transform: `scaleX(${maskScale})`\n    }\n  };\n})`\n  position: absolute;\n  left: 0;\n  top: -50%;\n  height: 200%;\n  width: 100%;\n  background: #ffffff;\n  transform-origin: left center;\n  will-change: transform;\n`;\nconst ProgressHover = styled('div').attrs(_ref4 => {\n  let {\n    cursorRatio,\n    isHovering,\n    progressPercent\n  } = _ref4;\n  return {\n    style: {\n      left: progressPercent,\n      transform: `scaleX(${cursorRatio})`,\n      opacity: isHovering ? 1 : 0,\n      visibility: isHovering ? 'visible' : 'hidden'\n    }\n  };\n})`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.4);\n  transform-origin: left center;\n  transition: ${transition.short('opacity', 'visibility')};\n  will-change: left, transform, opacity, visible;\n`;\nconst BufferedChunk = styled('div').attrs(_ref5 => {\n  let {\n    start,\n    end\n  } = _ref5;\n  return {\n    style: {\n      left: `${start}px`,\n      right: `${end}px`\n    }\n  };\n})`\n  background: rgba(255, 255, 255, 0.35);\n  position: absolute;\n  top: 0;\n  bottom: 0;\n`;\nconst ProgressBar = _ref6 => {\n  let {\n    bufferedMedia,\n    cursorX,\n    duration,\n    hoveredTime,\n    isDragging,\n    isHovering,\n    onClick,\n    onMouseDown,\n    onMouseOver,\n    progress,\n    showTooltip\n  } = _ref6;\n  const {\n    props: {\n      size\n    }\n  } = useContext(GlobalContext);\n  const wrapRef = useRef();\n  const tooltipRef = useRef();\n  const isSmallCard = useMemo(() => isSmall(size), [size]);\n  const getWrapWidth = useCallback(() => {\n    if (wrapRef.current) {\n      return wrapRef.current.getBoundingClientRect().width - PADDING;\n    }\n    return 0;\n  }, []);\n  const progressRatio = useMemo(() => clampNumber(progress / duration, 0, 1), [duration, progress]);\n  const progressPercent = useMemo(() => `${clampNumber(progressRatio * 100, 1, 99)}%`, [progressRatio]);\n  const cursorRatio = useMemo(() => {\n    if (wrapRef.current) {\n      const wrapWidth = getWrapWidth();\n      const startPoint = progressRatio * wrapWidth;\n      const cursorPosition = cursorX - startPoint;\n      const width = wrapWidth - startPoint;\n      if (cursorPosition > 0) {\n        return clampNumber((cursorPosition / width).toFixed(3), 0, 0.99);\n      }\n    }\n    return 0;\n  }, [cursorX, getWrapWidth, progressRatio]);\n  const bufferedMediaChunks = useMemo(() => {\n    const wrapWidth = getWrapWidth();\n    return bufferedMedia.map((chunk, key) => {\n      const start = chunk.start * wrapWidth;\n      const end = wrapWidth - chunk.end * wrapWidth;\n      return {\n        key,\n        start,\n        end\n      };\n    });\n  }, [bufferedMedia, getWrapWidth]);\n  const tooltipLabel = useMemo(() => formatSeconds(hoveredTime), [hoveredTime]);\n  const tooltipPositionX = useMemo(() => {\n    if (wrapRef.current && tooltipRef.current) {\n      const wrapWidth = getWrapWidth();\n      const tooltipWidth = tooltipRef.current.getBoundingClientRect().width;\n      const tooltipHalf = tooltipWidth / 2;\n      return clampNumber(cursorX, tooltipHalf, wrapWidth - tooltipHalf);\n    }\n    return 0;\n  }, [cursorX, getWrapWidth]);\n  const mouseEvents = useMemo(() => ({\n    onClick,\n    onMouseDown,\n    onMouseOver\n  }), [onClick, onMouseDown, onMouseOver]);\n  const showAccessories = useMemo(() => isDragging || isHovering, [isDragging, isHovering]);\n  return /*#__PURE__*/React.createElement(OuterWrap$1, _extends({\n    $cardSize: size,\n    ref: wrapRef\n  }, mouseEvents), /*#__PURE__*/React.createElement(BarsWrap, {\n    $cardSize: size,\n    isDragging: isDragging\n  }, /*#__PURE__*/React.createElement(ProgressLine, null, /*#__PURE__*/React.createElement(ProgressHover, {\n    cursorRatio: cursorRatio,\n    isHovering: isHovering,\n    progressPercent: progressPercent\n  }), bufferedMediaChunks.map(_ref7 => {\n    let {\n        key\n      } = _ref7,\n      chunk = _objectWithoutProperties(_ref7, _excluded$3);\n    return /*#__PURE__*/React.createElement(BufferedChunk, _extends({\n      key: key\n    }, chunk));\n  }), /*#__PURE__*/React.createElement(ProgressMask, {\n    maskScale: progressRatio\n  })), /*#__PURE__*/React.createElement(Scrubber, {\n    $cardSize: size,\n    isVisible: showAccessories,\n    positionX: progressPercent\n  }), !isSmallCard && /*#__PURE__*/React.createElement(Tooltip, {\n    isDragging: isDragging,\n    isVisible: showAccessories,\n    label: tooltipLabel,\n    positionX: tooltipPositionX,\n    ref: tooltipRef,\n    size: size\n  })));\n};\nvar _path, _path2;\nconst _excluded$2 = [\"$cardSize\"],\n  _excluded2 = [\"$cardSize\"],\n  _excluded3 = [\"type\", \"$cardSize\"];\nconst Backward = _ref => {\n  let props = _objectWithoutProperties(_ref, _excluded$2);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 29\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#FFF\",\n    fillRule: \"evenodd\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    d: \"M4 18c0 6.627 5.373 12 12 12s12-5.373 12-12S22.627 6 16 6h-4V1L6 7l6 6V8h4c5.523 0 10 4.477 10 10s-4.477 10-10 10S6 23.523 6 18H4zm15.63 4.13a2.84 2.84 0 01-1.28-.27 2.44 2.44 0 01-.89-.77 3.57 3.57 0 01-.52-1.25 7.69 7.69 0 01-.17-1.68 7.83 7.83 0 01.17-1.68c.094-.445.27-.87.52-1.25.23-.325.535-.59.89-.77.4-.188.838-.28 1.28-.27a2.44 2.44 0 012.16 1 5.23 5.23 0 01.7 2.93 5.23 5.23 0 01-.7 2.93 2.44 2.44 0 01-2.16 1.08zm0-1.22c.411.025.8-.19 1-.55a3.38 3.38 0 00.37-1.51v-1.38a3.31 3.31 0 00-.29-1.5 1.23 1.23 0 00-2.06 0 3.31 3.31 0 00-.29 1.5v1.38a3.38 3.38 0 00.29 1.51c.195.356.575.57.98.55zm-9 1.09v-1.18h2v-5.19l-1.86 1-.55-1.06 2.32-1.3H14v6.5h1.78V22h-5.15z\",\n    transform: \"translate(-4 -1)\"\n  })));\n};\nconst Forward = _ref2 => {\n  let props = _objectWithoutProperties(_ref2, _excluded2);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 29\"\n  }, props), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#FFF\",\n    fillRule: \"evenodd\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    d: \"M26 18c0 5.523-4.477 10-10 10S6 23.523 6 18 10.477 8 16 8h4v5l6-6-6-6v5h-4C9.373 6 4 11.373 4 18s5.373 12 12 12 12-5.373 12-12h-2zm-6.36 4.13a2.81 2.81 0 01-1.28-.27 2.36 2.36 0 01-.89-.77 3.39 3.39 0 01-.47-1.25 7.12 7.12 0 01-.17-1.68 7.24 7.24 0 01.17-1.68 3.46 3.46 0 01.52-1.25 2.36 2.36 0 01.89-.77c.4-.19.838-.282 1.28-.27a2.44 2.44 0 012.16 1 5.31 5.31 0 01.7 2.93 5.31 5.31 0 01-.7 2.93 2.44 2.44 0 01-2.21 1.08zm0-1.22a1 1 0 001-.55c.22-.472.323-.99.3-1.51v-1.38a3.17 3.17 0 00-.3-1.5 1.22 1.22 0 00-2.05 0 3.18 3.18 0 00-.29 1.5v1.38a3.25 3.25 0 00.29 1.51 1 1 0 001.05.55zm-7.02-3.49c.355.035.71-.06 1-.27a.84.84 0 00.31-.68v-.08a.94.94 0 00-.3-.74 1.2 1.2 0 00-.83-.27 1.65 1.65 0 00-.89.24 2.1 2.1 0 00-.68.68l-.93-.83a5.37 5.37 0 01.44-.51 2.7 2.7 0 01.54-.4 2.55 2.55 0 01.7-.27 3.25 3.25 0 01.87-.1 3.94 3.94 0 011.06.14c.297.078.576.214.82.4.224.168.408.383.54.63.123.26.184.543.18.83a2 2 0 01-.11.67 1.82 1.82 0 01-.32.52 1.79 1.79 0 01-.47.36 2.27 2.27 0 01-.57.2V18c.219.04.431.11.63.21a1.7 1.7 0 01.85.93c.084.234.124.481.12.73a2 2 0 01-.2.92 2 2 0 01-.58.72 2.66 2.66 0 01-.89.45 3.76 3.76 0 01-1.15.16 4.1 4.1 0 01-1-.11 3.1 3.1 0 01-.76-.31 2.76 2.76 0 01-.56-.45 4.22 4.22 0 01-.44-.55l1.07-.81c.082.147.175.288.28.42.105.128.226.243.36.34.137.097.29.171.45.22a2 2 0 00.57.07 1.45 1.45 0 001-.3 1.12 1.12 0 00.34-.85v-.08a1 1 0 00-.37-.8 1.78 1.78 0 00-1.06-.28h-.76v-1.21h.74z\",\n    transform: \"translate(-4 -1)\"\n  })));\n};\nconst SeekIcon = styled('svg')`\n  stroke: #fff;\n  width: ${_ref3 => {\n  let {\n    $cardSize\n  } = _ref3;\n  return isLarge($cardSize) ? 30 : 24;\n}}px;\n  height: ${_ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return isLarge($cardSize) ? 30 : 24;\n}}px;\n\n  ${_ref5 => {\n  let {\n    $cardSize\n  } = _ref5;\n  return !isLarge($cardSize) && media.mobile`\n    width: 0;\n    height: 0;\n  `;\n}}\n`;\nconst SeekButtonWrap = styled(MediaButton)`\n  margin: 0 ${_ref6 => {\n  let {\n    $cardSize\n  } = _ref6;\n  return isLarge($cardSize) ? '28px' : '3px';\n}};\n`;\nconst SeekButton = _ref7 => {\n  let {\n      type = 'rewind',\n      $cardSize\n    } = _ref7,\n    props = _objectWithoutProperties(_ref7, _excluded3);\n  const IconComponent = useMemo(() => type === 'rewind' ? Backward : Forward, [type]);\n  return /*#__PURE__*/React.createElement(SeekButtonWrap, _extends({\n    title: type === 'rewind' ? 'Rewind' : 'Forward',\n    $cardSize: $cardSize\n  }, props), /*#__PURE__*/React.createElement(SeekIcon, {\n    as: IconComponent,\n    $cardSize: $cardSize\n  }));\n};\nvar _Svg;\nconst BASE_SIZE = 12;\nconst BASE_OFFSET = 6;\nconst offsetScales = {\n  normal: 0.8,\n  small: 0.6\n};\nconst sizeScales = {\n  normal: 0.9,\n  small: 0.8\n};\nconst getSpinnerOffset = size => Math.floor(BASE_OFFSET * (offsetScales[size] || 1));\nconst getSpinnerSize = size => Math.floor(BASE_SIZE * (sizeScales[size] || 1));\nconst rotate = keyframes`\n  100% {\n    transform: rotate(360deg);\n  }\n`;\nconst dash = keyframes`\n  0% {\n    stroke-dasharray: 1, 150;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -35;\n  }\n  100% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -124;\n  }\n`;\nconst Wrap = styled(MediaButton).attrs(_ref => {\n  let {\n    isVisible\n  } = _ref;\n  return {\n    style: {\n      opacity: isVisible ? 1 : 0,\n      visibility: isVisible ? 'visible' : 'hidden'\n    }\n  };\n})(_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  const size = `${getSpinnerSize($cardSize)}px`;\n  const offset = `${getSpinnerOffset($cardSize)}px`;\n  return css`\n    position: absolute;\n    width: ${size};\n    right: ${offset};\n    top: ${offset};\n    transition: ${transition.medium('opacity', 'visibility')};\n    will-change: opacity, visibility;\n    pointer-events: none;\n  `;\n});\nconst Svg = styled('svg')`\n  width: 100%;\n  animation: ${rotate} 2s linear infinite;\n  will-change: transform;\n`;\nconst Circle = styled('circle')`\n  stroke: #fff;\n  stroke-linecap: round;\n  stroke-width: 7;\n  fill: none;\n  animation: ${dash} 1.5s ease-in-out infinite;\n  will-change: stroke-dasharray, stroke-dashoffset;\n`;\nconst Spinner = _ref3 => {\n  let {\n    size,\n    isVisible\n  } = _ref3;\n  return /*#__PURE__*/React.createElement(Wrap, {\n    $cardSize: size,\n    className: classNames.spinner,\n    isVisible: isVisible\n  }, _Svg || (_Svg = /*#__PURE__*/React.createElement(Svg, {\n    viewBox: \"0 0 50 50\"\n  }, /*#__PURE__*/React.createElement(Circle, {\n    cx: \"25\",\n    cy: \"25\",\n    r: \"20\"\n  }))));\n};\nconst SPACE_KEY = 32;\nconst L_ARROW_KEY = 37;\nconst R_ARROW_KEY = 39;\nconst M_KEY = 77;\nconst OuterWrap = styled('div').attrs({\n  className: classNames.mediaControls\n})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  transition: ${transition.long('background')}, ${transition.medium('opacity')};\n  will-change: background;\n  display: flex;\n  flex-direction: column;\n  pointer-events: auto;\n\n  ${_ref => {\n  let {\n    hasInteracted,\n    isDragging,\n    isPlaying\n  } = _ref;\n  const bg = 'rgba(0, 0, 0, 0.35)';\n  const dragBg = 'rgba(0, 0, 0, 0.2)';\n  const isPaused = hasInteracted && !isPlaying;\n  return css`\n      .${classNames.main}:hover & {\n        background: ${!isDragging ? bg : dragBg};\n      }\n\n      .${classNames.main}:not(:hover) & {\n        opacity: ${!hasInteracted || isPaused ? 1 : 0};\n        ${isPaused && `background: ${bg}`};\n      }\n    `;\n}}\n`;\nconst InnerWrap = styled('div')`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2;\n`;\nconst ControlsTop = styled('div')`\n  flex: 1;\n\n  ${_ref2 => {\n  let {\n    isVisible\n  } = _ref2;\n  return !isVisible && css`\n      *[class*='${classNames.mediaControls}']:not(.${classNames.progressTime}) {\n        transition: ${transition.medium('opacity', 'visibility')};\n        opacity: 0;\n        visibility: hidden;\n      }\n    `;\n}}\n`;\nconst getNextPlaybackRate = rate => {\n  switch (rate) {\n    case 1:\n      return 1.25;\n    case 1.25:\n      return 1.5;\n    case 1.5:\n      return 2;\n    default:\n      return 1;\n  }\n};\nconst Controls = _ref3 => {\n  let {\n    MediaComponent,\n    mediaProps\n  } = _ref3;\n  const {\n    props: {\n      autoPlay,\n      controls,\n      mediaRef: propRef,\n      muted,\n      loop,\n      size\n    }\n  } = useContext(GlobalContext);\n  const [duration, setDuration] = useState(0);\n  const [progress, setProgress] = useState(0);\n  const [buffered, setBuffered] = useState([]);\n  const [cursorX, setCursorX] = useState(0);\n  const [hoveredTime, setHoveredTime] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(autoPlay);\n  const [isMuted, setIsMuted] = useState(muted);\n  const [isBuffering, setIsBuffering] = useState(false);\n  const [isHovering, setIsHovering] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [playbackRate, setPlaybackRate] = useState(1);\n  const [hasInteracted, setHasInteracted] = useState(autoPlay);\n  const [pausedByDrag, setPausedByDrag] = useState(false);\n  const mediaRef = useRef();\n  const setRefs = useCallback(node => {\n    mediaRef.current = node;\n    if (propRef) {\n      if (isFunction(propRef)) {\n        propRef(node);\n      } else {\n        propRef.current = node;\n      }\n    }\n  }, [propRef]);\n  const isNotSmall = useMemo(() => !isSmall(size), [size]);\n  const mediaEvents = useMemo(() => ({\n    onCanPlay: () => setIsBuffering(false),\n    onLoadedMetadata: e => setDuration(e.currentTarget.duration),\n    onPause: () => setIsPlaying(false),\n    onPlay: () => setIsPlaying(true),\n    onPlaying: () => setIsBuffering(false),\n    onProgress: e => setBuffered(e.currentTarget.buffered),\n    onRateChange: e => setPlaybackRate(e.currentTarget.playbackRate),\n    onTimeUpdate: e => setProgress(e.currentTarget.currentTime),\n    onVolumeChange: e => setIsMuted(e.currentTarget.muted),\n    onWaiting: e => setIsBuffering(true)\n  }), []);\n  const evaluateCursorPosition = useCallback(event => {\n    if (mediaRef.current) {\n      const bounds = event.currentTarget.getBoundingClientRect();\n      const cursor = clampNumber(Math.floor(event.clientX - bounds.left), 0, bounds.width);\n      const time = cursor / bounds.width * mediaRef.current.duration;\n      return {\n        cursor,\n        time\n      };\n    }\n    return {\n      cursor: 0,\n      time: 0\n    };\n  }, []);\n  const togglePlayback = useCallback(() => {\n    if (mediaRef.current) {\n      if (mediaRef.current.paused) {\n        if (!hasInteracted) {\n          setHasInteracted(true);\n        }\n        mediaRef.current.play();\n      } else {\n        mediaRef.current.pause();\n      }\n    }\n  }, [hasInteracted]);\n  const jumpTo = useCallback(time => {\n    if (mediaRef.current) {\n      const t = clampNumber(time, 0, mediaRef.current.duration);\n      mediaRef.current.currentTime = t;\n      setProgress(t);\n    }\n  }, []);\n  const onSeekClick = useCallback((event, type) => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (mediaRef.current) {\n      const {\n        currentTime\n      } = mediaRef.current;\n      jumpTo(type === 'rewind' ? currentTime - 10 : currentTime + 30);\n    }\n  }, [jumpTo]);\n  const onMuteClick = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (mediaRef.current) {\n      mediaRef.current.muted = !mediaRef.current.muted;\n    }\n  }, []);\n  const onPlaybackRateClick = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (mediaRef.current) {\n      mediaRef.current.playbackRate = getNextPlaybackRate(mediaRef.current.playbackRate);\n    }\n  }, []);\n  const onProgressBarClick = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(false);\n  }, []);\n  const onProgressBarMouseDown = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(true);\n    const {\n      time\n    } = evaluateCursorPosition(event);\n    jumpTo(time);\n  }, [evaluateCursorPosition, jumpTo]);\n  const onProgressBarMouseOver = useCallback(() => setIsHovering(true), []);\n  const onWrapClick = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (isDragging) {\n      setIsDragging(false);\n    } else {\n      togglePlayback();\n    }\n  }, [isDragging, togglePlayback]);\n  const onWrapMouseMove = useCallback(event => {\n    if ((isDragging || isHovering) && mediaRef.current) {\n      event.preventDefault();\n      const {\n        cursor,\n        time\n      } = evaluateCursorPosition(event);\n      setHoveredTime(time);\n      setCursorX(cursor);\n      if (isDragging) {\n        if (!mediaRef.current.paused) {\n          mediaRef.current.pause();\n          setPausedByDrag(true);\n        }\n        jumpTo(time);\n      }\n    }\n  }, [evaluateCursorPosition, isDragging, isHovering, jumpTo]);\n  const onWrapMouseOver = useCallback(event => {\n    if (isDragging && event.buttons === 0) {\n      setIsDragging(false);\n    }\n  }, [isDragging]);\n  const onWrapKeyDown = useCallback(event => {\n    if (isDragging) {\n      return;\n    }\n    const {\n      keyCode\n    } = event;\n    if ([SPACE_KEY, L_ARROW_KEY, R_ARROW_KEY, M_KEY].includes(keyCode) && mediaRef.current) {\n      event.preventDefault();\n      switch (keyCode) {\n        case SPACE_KEY:\n          togglePlayback();\n          break;\n        case L_ARROW_KEY:\n          jumpTo(mediaRef.current.currentTime - 5);\n          break;\n        case R_ARROW_KEY:\n          jumpTo(mediaRef.current.currentTime + 5);\n          break;\n        case M_KEY:\n          mediaRef.current.muted = !mediaRef.current.muted;\n          break;\n      }\n    }\n  }, [isDragging, jumpTo, togglePlayback]);\n  const outerWrapEvents = useMemo(() => ({\n    onClick: onWrapClick,\n    onKeyDown: onWrapKeyDown,\n    onMouseMove: onWrapMouseMove,\n    onMouseOut: () => setIsHovering(false),\n    onMouseOver: onWrapMouseOver\n  }), [onWrapClick, onWrapKeyDown, onWrapMouseMove, onWrapMouseOver]);\n  const outerWrapTitle = useMemo(() => hasInteracted ? {\n    title: ''\n  } : {}, [hasInteracted]);\n  const bufferedMedia = useMemo(() => {\n    if (buffered && buffered.length && mediaRef.current) {\n      return [...Array(buffered.length).keys()].map(index => {\n        return {\n          start: buffered.start(index) / mediaRef.current.duration,\n          end: buffered.end(index) / mediaRef.current.duration\n        };\n      });\n    }\n    return [];\n  }, [buffered]);\n  const currentTime = useMemo(() => formatSeconds(progress || 0), [progress]);\n  const endTime = useMemo(() => formatSeconds(duration || 0), [duration]);\n  const footerControlsProps = useMemo(() => ({\n    $cardSize: size,\n    currentTime,\n    endTime,\n    isMuted,\n    onMuteClick,\n    onPlaybackRateClick,\n    playbackRate\n  }), [currentTime, endTime, isMuted, onMuteClick, onPlaybackRateClick, playbackRate, size]);\n  const progressBarProps = useMemo(() => ({\n    bufferedMedia,\n    cursorX,\n    duration,\n    hoveredTime,\n    isDragging,\n    isHovering,\n    onClick: onProgressBarClick,\n    onMouseDown: onProgressBarMouseDown,\n    onMouseOver: onProgressBarMouseOver,\n    progress,\n    showTooltip: isDragging || isHovering\n  }), [bufferedMedia, cursorX, duration, hoveredTime, isDragging, isHovering, onProgressBarClick, onProgressBarMouseDown, onProgressBarMouseOver, progress]);\n  useEffect(() => {\n    if (!isDragging && pausedByDrag && mediaRef.current && mediaRef.current.paused) {\n      mediaRef.current.play();\n      setPausedByDrag(false);\n    }\n  }, [pausedByDrag, isDragging]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MediaComponent, _extends({}, mediaProps, mediaEvents, {\n    ref: setRefs,\n    autoPlay: autoPlay,\n    loop: loop,\n    muted: muted\n  })), controls && /*#__PURE__*/React.createElement(OuterWrap, _extends({}, outerWrapTitle, {\n    tabIndex: 0,\n    hasInteracted: hasInteracted,\n    isDragging: isDragging,\n    isPlaying: isPlaying\n  }, outerWrapEvents), /*#__PURE__*/React.createElement(Spinner, {\n    size: size,\n    isVisible: isBuffering\n  }), !hasInteracted ? /*#__PURE__*/React.createElement(InnerWrap, null, /*#__PURE__*/React.createElement(PlaybackButton, {\n    $cardSize: size\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ControlsTop, {\n    isVisible: !isDragging\n  }, /*#__PURE__*/React.createElement(InnerWrap, null, isNotSmall && /*#__PURE__*/React.createElement(SeekButton, {\n    className: classNames.rwControl,\n    type: \"rewind\",\n    $cardSize: size,\n    onClick: event => onSeekClick(event, 'rewind')\n  }), /*#__PURE__*/React.createElement(PlaybackButton, {\n    $cardSize: size,\n    isPlaying: isPlaying\n  }), isNotSmall && /*#__PURE__*/React.createElement(SeekButton, {\n    className: classNames.ffwControl,\n    type: \"fastforward\",\n    $cardSize: size,\n    onClick: event => onSeekClick(event, 'fastforward')\n  })), isNotSmall && /*#__PURE__*/React.createElement(FooterControls, footerControlsProps)), /*#__PURE__*/React.createElement(ProgressBar, progressBarProps))));\n};\nconst VideoDOM = styled('video')`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  &::media-controls-start-playback-button {\n    display: none;\n    appearance: none;\n  }\n`;\nconst Video = props => {\n  const {\n    state: {\n      imageUrl,\n      playsInline,\n      videoUrl\n    }\n  } = useContext(GlobalContext);\n  const mediaProps = useMemo(() => {\n    const mediaProps = {\n      className: `${classNames.media} ${classNames.video}`,\n      src: videoUrl,\n      playsInline\n    };\n    if (imageUrl) mediaProps.poster = imageProxy(imageUrl);\n    return mediaProps;\n  }, [imageUrl, playsInline, videoUrl]);\n  return /*#__PURE__*/React.createElement(Wrap$1, _extends({\n    className: `${classNames.mediaWrapper} ${classNames.videoWrapper}`\n  }, props), /*#__PURE__*/React.createElement(Controls, {\n    MediaComponent: VideoDOM,\n    mediaProps: mediaProps\n  }));\n};\nconst Audio = props => {\n  const {\n    state: {\n      audioUrl\n    }\n  } = useContext(GlobalContext);\n  const mediaProps = useMemo(() => ({\n    className: `${classNames.media} ${classNames.audio}`,\n    src: audioUrl\n  }), [audioUrl]);\n  return /*#__PURE__*/(\n    // eslint-disable-next-line\n    React.createElement(ImageComponent, _extends({\n      className: `${classNames.mediaWrapper} ${classNames.audioWrapper}`\n    }, props), /*#__PURE__*/React.createElement(Controls, {\n      MediaComponent: \"audio\",\n      mediaProps: mediaProps\n    }))\n  );\n};\nconst isUrl = url => getUrlPath(url) !== null;\nconst MEDIA_COMPONENT = {\n  video: Video,\n  image: ImageComponent,\n  audio: Audio\n};\nconst getMediaType = (isAudio, isVideo) => {\n  if (isAudio) return 'audio';\n  if (isVideo) return 'video';\n  return 'image';\n};\nconst CardMedia = () => {\n  const {\n    state: {\n      imageUrl,\n      isAudio,\n      isVideo\n    }\n  } = useContext(GlobalContext);\n  const [isLoading, setIsLoading] = useState(isUrl(imageUrl));\n  const mediaType = getMediaType(isAudio, isVideo);\n  const MediaComponent = MEDIA_COMPONENT[mediaType];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MediaComponent, {\n    $isLoading: isLoading\n  }), isLoading && /*#__PURE__*/React.createElement(ImageLoadCatcher, {\n    src: imageUrl,\n    onLoad: () => setIsLoading(false)\n  }));\n};\nconst _excluded$1 = [\"href\", \"rel\", \"target\"];\nfunction ownKeys$1(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread$1(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys$1(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$1(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nconst HEIGHT = '382px';\nconst contrastStyle = _ref => {\n  let {\n    backgroundColor,\n    color\n  } = _ref;\n  return css`\n  background-color: ${backgroundColor};\n  border-color: ${color};\n  transition-property: filter;\n  will-change: filter;\n\n  &&& {\n    color: ${color};\n  }\n\n  &:hover {\n    filter: brightness(90%);\n  }\n`;\n};\nconst largeStyle = css`\n  flex-direction: column;\n  height: ${HEIGHT};\n  ${media.mobile`\n    height: calc(${HEIGHT} * 7/9);\n  `};\n`;\nconst hoverStyle = css`\n  transition-property: background, border-color;\n  will-change: background, border-color;\n  &:hover {\n    background-color: var(--microlink-hover-background-color, #f5f8fa);\n    border-color: var(--microlink-hover-border-color, #8899a680);\n  }\n`;\nconst rtlStyle = _ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return css`\n  flex-direction: ${isLarge($cardSize) ? 'column-reverse' : 'row-reverse'};\n`;\n};\nconst baseStyle = css(() => `\n  max-width: var(--microlink-max-width, 500px);\n  background-color: var(--microlink-background-color, #fff);\n  border-width: var(--microlink-border-width, 1px);\n  border-style: var(--microlink-border-style, solid);\n  border-color: var(--microlink-border-color, #e1e8ed);\n  color: var(--microlink-color, #181919);\n  overflow: hidden;\n  font-family: ${font.sans};\n  display: flex;\n  text-decoration: none;\n  opacity: 1;\n  position: relative;\n  transition-duration: ${speed.medium};\n  transition-timing-function: ${animation.medium};\n\n  &:active,\n  &:hover {\n    outline: 0;\n  }\n`);\nconst Element = styled('a')(baseStyle, _ref3 => {\n  let {\n    $isLoading,\n    contrast\n  } = _ref3;\n  return !$isLoading && !contrast && hoverStyle;\n}, _ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return isLarge($cardSize) && largeStyle;\n}, _ref5 => {\n  let {\n    direction\n  } = _ref5;\n  return direction === 'rtl' && rtlStyle;\n}, _ref6 => {\n  let {\n    backgroundColor,\n    color,\n    contrast\n  } = _ref6;\n  return contrast && color && backgroundColor && contrastStyle;\n}, _ref7 => {\n  let {\n    backgroundColor,\n    color,\n    contrast\n  } = _ref7;\n  return contrast && (!color || !backgroundColor) && hoverStyle;\n});\nconst CardWrap = /*#__PURE__*/forwardRef((_ref8, ref) => {\n  let {\n      href,\n      rel,\n      target\n    } = _ref8,\n    restProps = _objectWithoutProperties(_ref8, _excluded$1);\n  const {\n    state: {\n      backgroundColor,\n      color,\n      title\n    },\n    props: {\n      size: $cardSize\n    }\n  } = useContext(GlobalContext);\n  return /*#__PURE__*/createElement(Element, _objectSpread$1(_objectSpread$1(_objectSpread$1({}, restProps.as === 'a' ? {\n    href,\n    rel,\n    target\n  } : undefined), restProps), {}, {\n    backgroundColor,\n    $cardSize,\n    color,\n    ref,\n    title\n  }));\n});\nCardWrap.displayName = 'CardWrap';\nCardWrap.defaultProps = {\n  as: 'a',\n  rel: 'noopener noreferrer',\n  target: '_blank'\n};\n\n/* global IntersectionObserver */\n\nconst useIntersectionObserver = (enabled, options) => {\n  const [hasIntersected, setHasIntersected] = useState(false);\n  const refCallback = useCallback(node => {\n    if (enabled) {\n      const onIntersect = (_ref, self) => {\n        let [entry] = _ref;\n        if (entry.isIntersecting) {\n          setHasIntersected(true);\n          self.unobserve(entry.target);\n        }\n      };\n      const observer = new IntersectionObserver(onIntersect, options);\n      if (node !== null) {\n        observer.observe(node);\n      }\n    } else {\n      setHasIntersected(true);\n    }\n  }, [enabled, options]);\n  return [hasIntersected, refCallback];\n};\nvar _CardEmpty, _CardMedia, _CardContent;\nconst _excluded = [\"className\", \"fetchData\", \"lazy\", \"loading\", \"media\", \"setData\", \"url\", \"apiKey\"];\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nconst Card = props => {\n  const {\n      className,\n      fetchData,\n      lazy,\n      loading,\n      media: mediaProp,\n      setData,\n      url,\n      apiKey // destructuring to avoid pass it\n    } = props,\n    restProps = _objectWithoutProperties(props, _excluded);\n  const mediaProps = useMemo(() => castArray(mediaProp), [mediaProp]);\n  const {\n    updateState\n  } = useContext(GlobalContext);\n  const [loadingState, setLoading] = useState(true);\n  const [iframeMedia, setIframeMedia] = useState(null);\n  const [isError, setIsError] = useState(false);\n  const isLoadingUndefined = useMemo(() => loading === undefined, [loading]);\n  const [apiUrl, apiUrlProps] = useMemo(() => getApiUrl(_objectSpread(_objectSpread({}, props), {}, {\n    media: mediaProps\n  })), [mediaProps, props]);\n  const isLazyEnabled = useMemo(() => isLazySupported && (lazy === true || isObject(lazy)), [lazy]);\n  const lazyOptions = useMemo(() => isObject(lazy) ? lazy : undefined, [lazy]);\n  const [hasIntersected, cardRef] = useIntersectionObserver(isLazyEnabled, lazyOptions);\n  const canFetchData = useMemo(() => !isLazyEnabled || isLazyEnabled && hasIntersected, [isLazyEnabled, hasIntersected]);\n  const mergeData = useCallback(fetchedData => {\n    const payload = isFunction(setData) ? setData(fetchedData) : _objectSpread(_objectSpread({}, fetchedData), setData);\n    const {\n      title,\n      description,\n      url,\n      video,\n      audio,\n      image,\n      logo,\n      iframe\n    } = payload;\n    const mediaFallback = image || logo || {};\n    let media = mediaFallback;\n    let videoUrl;\n    let audioUrl;\n    let isVideo = false;\n    let isAudio = false;\n    const preferredMedia = getPreferredMedia(payload, mediaProps);\n    switch (preferredMedia) {\n      case 'audio':\n        isAudio = true;\n        audioUrl = getUrlPath(audio);\n        break;\n      case 'video':\n        isVideo = true;\n        videoUrl = getUrlPath(video);\n        break;\n      case 'iframe':\n        setIframeMedia(iframe);\n        break;\n      default:\n        media = someProp(payload, mediaProps) || mediaFallback;\n        break;\n    }\n    const imageUrl = getUrlPath(media);\n    const {\n      color,\n      background_color: backgroundColor\n    } = media;\n    updateState({\n      url,\n      color,\n      title,\n      description,\n      imageUrl,\n      videoUrl,\n      audioUrl,\n      isVideo,\n      isAudio,\n      backgroundColor\n    });\n    setLoading(false);\n  }, [updateState, mediaProps, setData]);\n  const toFetchData = useCallback(() => {\n    if (canFetchData) {\n      setLoading(true);\n      const fetch = fetchData ? fetchFromApi(apiUrl, apiUrlProps) : Promise.resolve({});\n      fetch.then(_ref => {\n        let {\n          data\n        } = _ref;\n        return mergeData(data);\n      }).catch(error => {\n        setLoading(false);\n        setIsError(true);\n        console.error(`\n┌───────────────┐\n│ Microlink SDK │\n└───────────────┘\n\n${error.description}\n\n${JSON.stringify(error.data)}\n\nid   ${error.headers['x-request-id']}\nuri  ${error.url}\ncode ${error.code} (${error.statusCode})\n\nmicrolink.io/${error.code.toLowerCase()}\n`);\n      });\n    }\n  }, [apiUrlProps, fetchData, apiUrl, mergeData, canFetchData]);\n  useEffect(toFetchData, [url, setData, hasIntersected]);\n  const isLoading = isLoadingUndefined ? loadingState : loading;\n  if (isError) {\n    return /*#__PURE__*/React.createElement(\"a\", _extends({\n      href: url\n    }, restProps), url);\n  }\n  if (iframeMedia) {\n    if (!isSSR) {\n      iframeMedia.scripts.forEach(attrs => {\n        const hasScript = document.querySelector(`script[src=\"${attrs.src}\"]`);\n        if (!hasScript) {\n          const script = document.createElement('script');\n          Object.keys(attrs).forEach(key => script[key] = attrs[key]);\n          document.body.appendChild(script);\n        }\n      });\n    }\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      className: classNames.iframe,\n      dangerouslySetInnerHTML: {\n        __html: iframeMedia.html\n      }\n    }, restProps));\n  }\n  return /*#__PURE__*/React.createElement(CardWrap, _extends({\n    className: `${classNames.main} ${className}`.trim(),\n    href: url,\n    $isLoading: isLoading,\n    ref: cardRef\n  }, restProps), isLoading ? _CardEmpty || (_CardEmpty = /*#__PURE__*/React.createElement(CardEmptyState, null)) : /*#__PURE__*/React.createElement(React.Fragment, null, _CardMedia || (_CardMedia = /*#__PURE__*/React.createElement(CardMedia, null)), _CardContent || (_CardContent = /*#__PURE__*/React.createElement(CardContent, null))));\n};\nconst Microlink = props => /*#__PURE__*/React.createElement(GlobalState, props, otherProps => /*#__PURE__*/React.createElement(Card, otherProps));\nMicrolink.defaultProps = {\n  className: '',\n  apiKey: undefined,\n  autoPlay: true,\n  controls: true,\n  direction: 'ltr',\n  lazy: true,\n  loop: true,\n  media: ['iframe', 'video', 'audio', 'image', 'logo'],\n  fetchData: true,\n  muted: true,\n  playsInline: true,\n  size: 'normal'\n};\nexport { Microlink as default, getApiUrl, imageProxy };","map":{"version":3,"names":["_extends","_defineProperty","_objectWithoutProperties","React","useRef","useMemo","useCallback","useEffect","createElement","useState","useContext","forwardRef","css","styled","keyframes","getApiUrl","getApiUrl$1","fetchFromApi","_excluded$8","ownKeys$4","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread$4","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","defineProperty","l","_ref","accessibility","debounce","ellipsis","u","is","c","lines","s","text","d","v","a","f","h","ref","title","g","m","n","i","current","innerText","clientHeight","Math","floor","slice","max","trim","clearTimeout","setTimeout","window","addEventListener","removeEventListener","getDefaultExportFromCjs","x","__esModule","prototype","hasOwnProperty","call","src","localhostUrl","isSSR","castArray","value","concat","getPreferredMedia","data","mediaProps","prefer","index","key","isNil","isFunction","fn","isObject","obj","getUrlPath","url","someProp","props","find","prop","media","mobile","desktop","apiKey","contrast","endpoint","force","headers","prerender","proxy","ttl","audio","includes","iframe","palette","screenshot","video","isLarge","cardSize","isSmall","imageProxy","test","URLSearchParams","default","af","il","toString","isLazySupported","formatSeconds","secs","secsToNum","parseInt","hours","minutes","seconds","map","join","clampNumber","num","min","BASE_CLASSNAME","CONTENT_BASE_CLASSNAME","MEDIA_BASE_CLASSNAME","CONTROLS_BASE_CLASSNAME","classNames","main","content","description","mediaWrapper","image","videoWrapper","audioWrapper","mediaControls","playbackControl","volumeControl","rwControl","ffwControl","rateControl","progressBar","progressTime","spinner","_excluded$7","ownKeys$3","_objectSpread$3","Clamp","children","className","StyledClamp","_ref2","$useNanoClamp","CardText","_ref3","useNanoClamp","textProps","as","speed","short","medium","long","animation","createTransition","properties","suffix","property","transition","_len","Array","_key","_len2","_key2","_len3","_key3","font","sans","mono","_excluded$6","ownKeys$2","_objectSpread$2","initialState","GlobalContext","createContext","GlobalState","autoPlay","controls","loop","mediaRef","muted","playsInline","size","rest","state","setState","updateState","newState","currentState","values","Provider","REGEX_STRIP_WWW","BADGE_WIDTH","BADGE_HEIGHT","getHostname","href","hostname","URL","replace","mobileDescriptionStyle","Content","attrs","$cardSize","Header","Description","Footer","_ref4","Author","PoweredBy","CardContent","isSmallCard","formattedUrl","handleOnClick","preventDefault","open","onClick","emptyStatePulse","emptyStateImagePulse","emptyStateAnimation","emptyStateImageAnimation","ImageLoadCatcher","loadingOverlay","$isLoading","mediaSizeStyles","small","normal","large","StyledWrap","Wrap$1","ImageWrap","ImageComponent","imageUrl","_FooterEmpty","MediaEmpty","HeaderEmpty","DescriptionEmpty","FooterEmpty","CardEmptyState","Fragment","style","marginBottom","MediaButton","_path$2","_path2$2","VolumeMute","xmlns","viewBox","fill","fillRule","stroke","strokeWidth","transform","VolumeUp","BottomControls","VolumeIcon","VolumeButton","PlaybackRateButton","_ref5","_ref6","_ref7","TimeLabel","_ref8","right","FooterControls","_ref9","currentTime","endTime","isMuted","onMuteClick","onPlaybackRateClick","playbackRate","VolumeComponent","isLargeCard","_excluded$5","_path$1","_path2$1","Pause","Play","iconSizes","PlaybackIcon","PlaybackButtonWrap","PlaybackButton","isPlaying","PlaybackComponent","SCRUBBER_SIZE","scrubberSizeScales","getScrubberSize","Scrubber","isVisible","positionX","left","opacity","visibility","scrubberSize","_excluded$4","BASE_FONT_SIZE","sizeScales$1","getMarkerFontSize","TooltipBase","position","isDragging","visible","top","Tooltip","label","displayName","_excluded$3","HEIGHT$1","PADDING","heightScales","activeHeightScales","getProgressBarHeight","getProgressBarActiveHeight","OuterWrap$1","BarsWrap","activeHeight","height","ProgressLine","ProgressMask","maskScale","ProgressHover","cursorRatio","isHovering","progressPercent","BufferedChunk","start","end","ProgressBar","bufferedMedia","cursorX","duration","hoveredTime","onMouseDown","onMouseOver","progress","showTooltip","wrapRef","tooltipRef","getWrapWidth","getBoundingClientRect","width","progressRatio","wrapWidth","startPoint","cursorPosition","toFixed","bufferedMediaChunks","chunk","tooltipLabel","tooltipPositionX","tooltipWidth","tooltipHalf","mouseEvents","showAccessories","_path","_path2","_excluded$2","_excluded2","_excluded3","Backward","Forward","SeekIcon","SeekButtonWrap","SeekButton","type","IconComponent","_Svg","BASE_SIZE","BASE_OFFSET","offsetScales","sizeScales","getSpinnerOffset","getSpinnerSize","rotate","dash","Wrap","offset","Svg","Circle","Spinner","cx","cy","SPACE_KEY","L_ARROW_KEY","R_ARROW_KEY","M_KEY","OuterWrap","hasInteracted","bg","dragBg","isPaused","InnerWrap","ControlsTop","getNextPlaybackRate","rate","Controls","MediaComponent","propRef","setDuration","setProgress","buffered","setBuffered","setCursorX","setHoveredTime","setIsPlaying","setIsMuted","isBuffering","setIsBuffering","setIsHovering","setIsDragging","setPlaybackRate","setHasInteracted","pausedByDrag","setPausedByDrag","setRefs","node","isNotSmall","mediaEvents","onCanPlay","onLoadedMetadata","currentTarget","onPause","onPlay","onPlaying","onProgress","onRateChange","onTimeUpdate","onVolumeChange","onWaiting","evaluateCursorPosition","event","bounds","cursor","clientX","time","togglePlayback","paused","play","pause","jumpTo","onSeekClick","stopPropagation","onProgressBarClick","onProgressBarMouseDown","onProgressBarMouseOver","onWrapClick","onWrapMouseMove","onWrapMouseOver","buttons","onWrapKeyDown","keyCode","outerWrapEvents","onKeyDown","onMouseMove","onMouseOut","outerWrapTitle","footerControlsProps","progressBarProps","tabIndex","VideoDOM","Video","videoUrl","poster","Audio","audioUrl","isUrl","MEDIA_COMPONENT","getMediaType","isAudio","isVideo","CardMedia","isLoading","setIsLoading","mediaType","onLoad","_excluded$1","ownKeys$1","_objectSpread$1","HEIGHT","contrastStyle","backgroundColor","color","largeStyle","hoverStyle","rtlStyle","baseStyle","Element","direction","CardWrap","rel","target","restProps","undefined","defaultProps","useIntersectionObserver","enabled","options","hasIntersected","setHasIntersected","refCallback","onIntersect","self","entry","isIntersecting","unobserve","observer","IntersectionObserver","observe","_CardEmpty","_CardMedia","_CardContent","_excluded","ownKeys","_objectSpread","Card","fetchData","lazy","loading","mediaProp","setData","loadingState","setLoading","iframeMedia","setIframeMedia","isError","setIsError","isLoadingUndefined","apiUrl","apiUrlProps","isLazyEnabled","lazyOptions","cardRef","canFetchData","mergeData","fetchedData","payload","logo","mediaFallback","preferredMedia","background_color","toFetchData","fetch","Promise","resolve","then","catch","error","console","JSON","stringify","code","statusCode","toLowerCase","scripts","hasScript","document","querySelector","script","body","appendChild","dangerouslySetInnerHTML","__html","html","Microlink","otherProps"],"sources":["/Users/janicewong/repos/stack-app/client/node_modules/@microlink/react/dist/microlink.mjs"],"sourcesContent":["import _extends from '@babel/runtime/helpers/extends';\nimport _defineProperty from '@babel/runtime/helpers/defineProperty';\nimport _objectWithoutProperties from '@babel/runtime/helpers/objectWithoutProperties';\nimport React, { useRef, useMemo, useCallback, useEffect, createElement, useState, useContext, forwardRef } from 'react';\nimport { css, styled, keyframes } from 'styled-components';\nimport { getApiUrl as getApiUrl$1, fetchFromApi } from '@microlink/mql';\nexport { fetchFromApi } from '@microlink/mql';\n\nconst _excluded$8 = [\"accessibility\", \"debounce\", \"ellipsis\", \"is\", \"lines\", \"text\"];\nfunction ownKeys$4(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$4(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$4(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$4(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nconst l = _ref => {\n  let {\n      accessibility: l = !0,\n      debounce: o = 300,\n      ellipsis: u = \"…\",\n      is: c = \"div\",\n      lines: s = 3,\n      text: d\n    } = _ref,\n    v = _objectWithoutProperties(_ref, _excluded$8);\n  const a = useRef(null),\n    f = useRef(\".\"),\n    h = _objectSpread$4(_objectSpread$4({\n      ref: a\n    }, l ? {\n      title: d\n    } : {}), v),\n    g = useMemo(() => \"string\" == typeof d && d.length > 0, [d]),\n    m = useCallback(() => {\n      var e, t, n, r;\n      if (!g) return;\n      const i = e => {\n        f.current = e, null != a.current && (a.current.innerText = e);\n      };\n      i(\".\");\n      const l = ((null !== (t = null === (e = a.current) || void 0 === e ? void 0 : e.clientHeight) && void 0 !== t ? t : 0) + 1) * s + 1,\n        o = \"…\" === u ? 5 : 1.2 * u.length;\n      let c = 0,\n        v = 0,\n        h = d.length;\n      for (; c <= h;) {\n        v = Math.floor((c + h) / 2);\n        if (i(d.slice(0, v)), v === d.length) return;\n        (null !== (r = null === (n = a.current) || void 0 === n ? void 0 : n.clientHeight) && void 0 !== r ? r : 0) <= l ? c = v + 1 : h = v - 1;\n      }\n      i(d.slice(0, Math.max(v - o, 0)).trim() + u);\n    }, [u, g, s, d]);\n  return useEffect(() => {\n    m();\n    const e = ((e, t) => {\n      let n;\n      const r = () => {\n        n = void 0, e();\n      };\n      return () => {\n        const i = null == n;\n        clearTimeout(n), n = setTimeout(r, t), i && e();\n      };\n    })(m, o);\n    return window.addEventListener(\"resize\", e), () => window.removeEventListener(\"resize\", e);\n  }, [m, o]), g ? /*#__PURE__*/createElement(c, h, f.current) : null;\n};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar src = () => /^https?:\\/\\/(localhost|0|10|127|192(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\\[::1?\\])/gi;\n\nvar localhostUrl = /*@__PURE__*/getDefaultExportFromCjs(src);\n\nconst isSSR = typeof window === 'undefined';\nconst castArray = value => [].concat(value);\nconst getPreferredMedia = (data, mediaProps) => {\n  let prefer;\n  for (let index = 0; index < mediaProps.length; index++) {\n    const key = mediaProps[index];\n    const value = data[key];\n    if (!isNil(value)) {\n      prefer = key;\n      break;\n    }\n  }\n  return prefer;\n};\nconst isFunction = fn => typeof fn === 'function';\nconst isObject = obj => typeof obj === 'object';\nconst isNil = value => value == null;\nconst getUrlPath = data => isObject(data) ? data.url : data;\nconst someProp = (data, props) => data[props.find(prop => !isNil(data[prop]))];\nconst media = {\n  mobile: function () {\n    return css`\n    @media (max-width: 48em) {\n      ${css(...arguments)};\n    }\n  `;\n  },\n  desktop: function () {\n    return css`\n    @media (min-width: 48em) {\n      ${css(...arguments)};\n    }\n  `;\n  }\n};\nconst getApiUrl = _ref => {\n  let {\n    apiKey,\n    contrast = false,\n    data,\n    endpoint,\n    force,\n    headers,\n    media,\n    prerender,\n    proxy,\n    ttl,\n    url\n  } = _ref;\n  return getApiUrl$1(url, {\n    apiKey,\n    audio: media.includes('audio'),\n    data,\n    endpoint,\n    force,\n    headers,\n    iframe: media.includes('iframe'),\n    palette: contrast,\n    prerender,\n    proxy,\n    screenshot: media.includes('screenshot'),\n    ttl,\n    video: media.includes('video')\n  });\n};\nconst isLarge = cardSize => cardSize === 'large';\nconst isSmall = cardSize => cardSize === 'small';\nconst imageProxy = url => localhostUrl().test(url) ? url : `https://images.weserv.nl/?${new URLSearchParams({\n  url,\n  default: url,\n  l: 9,\n  af: '',\n  il: '',\n  n: -1\n}).toString()}`;\nconst isLazySupported = !isSSR && 'IntersectionObserver' in window;\nconst formatSeconds = secs => {\n  const secsToNum = parseInt(secs, 10);\n  const hours = Math.floor(secsToNum / 3600);\n  const minutes = Math.floor(secsToNum / 60) % 60;\n  const seconds = secsToNum % 60;\n  return [hours, minutes, seconds].filter((v, i) => v > 0 || i > 0).map(v => v >= 10 ? v : `0${v}`).join(':');\n};\nconst clampNumber = (num, min, max) => {\n  switch (true) {\n    case num <= min:\n      return min;\n    case num >= max:\n      return max;\n    default:\n      return num;\n  }\n};\nconst BASE_CLASSNAME = 'microlink_card';\nconst CONTENT_BASE_CLASSNAME = `${BASE_CLASSNAME}__content`;\nconst MEDIA_BASE_CLASSNAME = `${BASE_CLASSNAME}__media`;\nconst CONTROLS_BASE_CLASSNAME = `${MEDIA_BASE_CLASSNAME}__controls`;\nconst classNames = {\n  main: BASE_CLASSNAME,\n  content: CONTENT_BASE_CLASSNAME,\n  title: `${CONTENT_BASE_CLASSNAME}_title`,\n  description: `${CONTENT_BASE_CLASSNAME}_description`,\n  url: `${CONTENT_BASE_CLASSNAME}_url`,\n  mediaWrapper: `${MEDIA_BASE_CLASSNAME}_wrapper`,\n  media: MEDIA_BASE_CLASSNAME,\n  image: `${MEDIA_BASE_CLASSNAME}_image`,\n  videoWrapper: `${MEDIA_BASE_CLASSNAME}_video_wrapper`,\n  video: `${MEDIA_BASE_CLASSNAME}_video`,\n  audioWrapper: `${MEDIA_BASE_CLASSNAME}_audio_wrapper`,\n  audio: `${MEDIA_BASE_CLASSNAME}_audio`,\n  mediaControls: CONTROLS_BASE_CLASSNAME,\n  playbackControl: `${CONTROLS_BASE_CLASSNAME}_playback`,\n  volumeControl: `${CONTROLS_BASE_CLASSNAME}_volume`,\n  rwControl: `${CONTROLS_BASE_CLASSNAME}_rewind`,\n  ffwControl: `${CONTROLS_BASE_CLASSNAME}_fast_forward`,\n  rateControl: `${CONTROLS_BASE_CLASSNAME}_rate`,\n  progressBar: `${CONTROLS_BASE_CLASSNAME}_progress_bar`,\n  progressTime: `${CONTROLS_BASE_CLASSNAME}_progress_time`,\n  spinner: `${CONTROLS_BASE_CLASSNAME}_spinner`,\n  iframe: `${BASE_CLASSNAME}__iframe`\n};\n\nconst _excluded$7 = [\"useNanoClamp\", \"children\"];\nfunction ownKeys$3(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$3(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$3(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$3(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nconst Clamp = _ref => {\n  let {\n    children,\n    className,\n    lines\n  } = _ref;\n  return isNil(children) ? null : /*#__PURE__*/React.createElement(l, {\n    className: className,\n    lines: lines,\n    text: children,\n    is: \"p\"\n  });\n};\nconst StyledClamp = styled(Clamp)`\n  &&& {\n    text-align: inherit;\n    font-weight: inherit;\n    font-family: inherit;\n    color: inherit;\n    margin: 0;\n\n    ${_ref2 => {\n  let {\n    $useNanoClamp\n  } = _ref2;\n  return !$useNanoClamp && css`\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n      `;\n}}\n  }\n`;\nconst CardText = _ref3 => {\n  let {\n      useNanoClamp = true,\n      children\n    } = _ref3,\n    props = _objectWithoutProperties(_ref3, _excluded$7);\n  const textProps = useNanoClamp ? props : _objectSpread$3(_objectSpread$3({}, props), {}, {\n    as: 'p',\n    title: children\n  });\n  return /*#__PURE__*/React.createElement(StyledClamp, _extends({\n    $useNanoClamp: useNanoClamp\n  }, textProps), children);\n};\n\nconst speed = {\n  short: '100ms',\n  medium: '150ms',\n  long: '300ms'\n};\nconst animation = {\n  short: 'cubic-bezier(.25,.8,.25,1)',\n  medium: 'cubic-bezier(.25,.8,.25,1)',\n  long: 'cubic-bezier(.4, 0, .2, 1)'\n};\nconst createTransition = (properties, s) => {\n  const suffix = `${speed[s]} ${animation[s]}`;\n  return properties.map(property => `${property} ${suffix}`).join(', ');\n};\nconst transition = {\n  short: function () {\n    for (var _len = arguments.length, properties = new Array(_len), _key = 0; _key < _len; _key++) {\n      properties[_key] = arguments[_key];\n    }\n    return createTransition(properties, 'short');\n  },\n  medium: function () {\n    for (var _len2 = arguments.length, properties = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      properties[_key2] = arguments[_key2];\n    }\n    return createTransition(properties, 'medium');\n  },\n  long: function () {\n    for (var _len3 = arguments.length, properties = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      properties[_key3] = arguments[_key3];\n    }\n    return createTransition(properties, 'long');\n  }\n};\n\n// https://primer.style/design/foundations/typography\nconst font = {\n  sans: \"InterUI, -apple-system, BlinkMacSystemFont, 'Helvetica Neue', 'Segoe UI', Oxygen, Ubuntu, Cantarell, 'Open Sans', sans-serif\",\n  mono: \"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace\"\n};\n\nconst _excluded$6 = [\"autoPlay\", \"children\", \"controls\", \"loop\", \"mediaRef\", \"muted\", \"playsInline\", \"size\"];\nfunction ownKeys$2(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$2(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$2(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$2(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nconst initialState = {};\nconst GlobalContext = /*#__PURE__*/React.createContext(initialState);\nconst GlobalState = _ref => {\n  let {\n      autoPlay,\n      children,\n      controls,\n      loop,\n      mediaRef,\n      muted,\n      playsInline,\n      size\n    } = _ref,\n    rest = _objectWithoutProperties(_ref, _excluded$6);\n  const [state, setState] = useState(initialState);\n  const updateState = useCallback(newState => setState(currentState => _objectSpread$2(_objectSpread$2({}, currentState), newState)), []);\n  const props = useMemo(() => ({\n    autoPlay,\n    controls,\n    loop,\n    mediaRef,\n    muted,\n    playsInline,\n    size\n  }), [autoPlay, controls, loop, mediaRef, muted, playsInline, size]);\n  const values = useMemo(() => ({\n    props,\n    state,\n    updateState\n  }), [props, state, updateState]);\n  return /*#__PURE__*/React.createElement(GlobalContext.Provider, {\n    value: values\n  }, children(rest));\n};\n\n/* global URL */\n\nconst REGEX_STRIP_WWW = /^www\\./;\nconst BADGE_WIDTH = '16px';\nconst BADGE_HEIGHT = '12px';\nconst getHostname = href => {\n  if (isNil(href)) return '';\n  const {\n    hostname\n  } = new URL(href);\n  return hostname.replace(REGEX_STRIP_WWW, '');\n};\nconst mobileDescriptionStyle = css`\n  ${media.mobile`\n    > p {\n      overflow: hidden;\n      text-overflow: ellipsis;\n      white-space: nowrap;\n    }\n  `};\n`;\nconst Content = styled('div').attrs({\n  className: classNames.content\n})`\n  display: flex;\n  padding: 10px 15px;\n  min-width: 0;\n  box-sizing: border-box;\n  ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return css`\n    flex: ${!isLarge($cardSize) ? 1 : '0 0 125px'};\n    justify-content: ${!isSmall($cardSize) ? 'space-around' : 'space-between'};\n    flex-direction: ${!isSmall($cardSize) ? 'column' : 'row'};\n    align-items: ${!isSmall($cardSize) ? 'stretch' : 'center'};\n  `;\n}};\n`;\nconst Header = styled('header').attrs({\n  className: classNames.title\n})`\n  text-align: left;\n  font-weight: bold;\n  margin: 0;\n  width: 100%;\n  ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return css`\n    flex-grow: ${!isSmall($cardSize) ? 1.2 : 0.8};\n    font-size: ${!isSmall($cardSize) ? '16px' : '15px'};\n\n    ${isSmall($cardSize) && css`\n      min-width: 0;\n      padding-right: 14px;\n    `}\n  `;\n}}\n`;\nconst Description = styled('div').attrs({\n  className: classNames.description\n})`\n  text-align: left;\n  font-size: 14px;\n  flex-grow: 2;\n  margin: auto 0;\n  line-height: 18px;\n  font-weight: normal;\n  ${_ref3 => {\n  let {\n    $cardSize\n  } = _ref3;\n  return !isLarge($cardSize) && mobileDescriptionStyle;\n}};\n`;\nconst Footer = styled('footer').attrs({\n  className: classNames.url\n})`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  text-align: left;\n  margin: 0;\n  flex-grow: 0;\n  font-weight: normal;\n  ${_ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return css`\n    font-size: ${!isSmall($cardSize) ? '12px' : '10px'};\n    ${!isSmall($cardSize) && 'width: 100%;'}\n  `;\n}};\n`;\nconst Author = styled(CardText)`\n  opacity: 0.75;\n  transition: ${transition.medium('opacity')};\n  will-change: opacity;\n\n  .${classNames.main}:hover & {\n    opacity: 1;\n  }\n`;\nconst PoweredBy = styled('span').attrs({\n  title: 'microlink.io'\n})`\n  background: url('https://cdn.microlink.io/logo/logo.svg') no-repeat center\n    center;\n  display: block;\n  margin-left: 15px;\n  transition: ${transition.medium('filter', 'opacity')};\n  will-change: filter, opacity;\n  &:not(:hover) {\n    filter: grayscale(100%);\n    opacity: 0.75;\n  }\n\n  min-width: ${BADGE_WIDTH};\n  width: ${BADGE_WIDTH};\n  background-size: ${BADGE_WIDTH};\n  height: ${BADGE_HEIGHT};\n`;\nconst CardContent = () => {\n  const {\n    state: {\n      description,\n      title,\n      url\n    },\n    props: {\n      size\n    }\n  } = useContext(GlobalContext);\n  const isSmallCard = isSmall(size);\n  const formattedUrl = useMemo(() => getHostname(url), [url]);\n  const handleOnClick = useCallback(e => {\n    e.preventDefault();\n    window.open('https://www.microlink.io', '_blank');\n  }, []);\n  return /*#__PURE__*/React.createElement(Content, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(Header, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(CardText, {\n    $useNanoClamp: false\n  }, title)), !isSmallCard && /*#__PURE__*/React.createElement(Description, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(CardText, {\n    lines: 2\n  }, description)), /*#__PURE__*/React.createElement(Footer, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(Author, {\n    $useNanoClamp: false\n  }, formattedUrl), /*#__PURE__*/React.createElement(PoweredBy, {\n    onClick: handleOnClick\n  })));\n};\n\nconst emptyStatePulse = keyframes`\n  0% {\n    background: #e1e8ed;\n  }\n  70% {\n    background: #cdd4d8;\n  }\n  100% {\n    background: #e1e8ed;\n  }\n`;\nconst emptyStateImagePulse = keyframes`\n  0% {\n    background: #e1e8ed;\n  }\n  70% {\n    background: #dce3e8;\n  }\n  100% {\n    background: #e1e8ed;\n  }\n`;\nconst emptyStateAnimation = css`\n  animation: ${emptyStatePulse} .75s linear infinite;\n`;\nconst emptyStateImageAnimation = css`\n  animation: ${emptyStateImagePulse} 1.25s linear infinite;\n`;\n\nconst ImageLoadCatcher = styled('img')`\n  height: 1px;\n  width: 1px;\n  position: absolute;\n  z-index: -1;\n`;\nconst loadingOverlay = css`\n  &::after {\n    content: '';\n    position: absolute;\n    left: 0;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    background: #e1e8ed;\n    z-index: 1;\n    transition: ${transition.medium('opacity', 'visibility')};\n    will-change: opacity;\n\n    ${_ref => {\n  let {\n    $isLoading\n  } = _ref;\n  return css`\n      opacity: ${$isLoading ? 1 : 0};\n      visibility: ${$isLoading ? 'visible' : 'hidden'};\n    `;\n}};\n  }\n`;\n\nconst mediaSizeStyles = {\n  small: css`\n    flex: 0 0 48px;\n  `,\n  normal: css`\n    flex: 0 0 125px;\n\n    ${media.mobile`\n      flex: 0 0 92px;\n    `}\n  `,\n  large: css`\n    flex: 1;\n\n    &::before {\n      padding-bottom: 0;\n    }\n  `\n};\nconst StyledWrap = styled('div')`\n  background: transparent no-repeat center center / cover;\n  display: block;\n  overflow: hidden;\n  height: auto;\n  position: relative;\n\n  &::before {\n    content: '';\n    padding-bottom: 100%;\n    display: block;\n  }\n\n  ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return mediaSizeStyles[$cardSize];\n}};\n\n  ${loadingOverlay};\n`;\nconst Wrap$1 = props => {\n  const {\n    props: {\n      size\n    }\n  } = useContext(GlobalContext);\n  return /*#__PURE__*/React.createElement(StyledWrap, _extends({\n    $cardSize: size\n  }, props));\n};\n\nconst ImageWrap = styled(Wrap$1).attrs({\n  className: `${classNames.media} ${classNames.image}`\n})`\n  background-image: ${_ref => {\n  let {\n    url\n  } = _ref;\n  return url ? `url('${imageProxy(url)}')` : '';\n}};\n`;\nconst ImageComponent = props => {\n  const {\n    state: {\n      imageUrl\n    }\n  } = useContext(GlobalContext);\n  return /*#__PURE__*/React.createElement(ImageWrap, _extends({\n    url: imageUrl\n  }, props));\n};\n\nvar _FooterEmpty;\nconst MediaEmpty = styled(ImageComponent)`\n  ${emptyStateImageAnimation};\n`;\nconst HeaderEmpty = styled('span')`\n  opacity: 0.8;\n  height: 16px;\n  width: ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return !isSmall($cardSize) ? '60%' : '75%';\n}};\n  display: block;\n  background: #e1e8ed;\n  margin: ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return !isSmall($cardSize) ? '2px 0 8px' : '0 20px 0 0';\n}};\n  ${emptyStateAnimation};\n\n  ${_ref3 => {\n  let {\n    $cardSize\n  } = _ref3;\n  return !isLarge($cardSize) && `\n    height: 15px;\n  `;\n}};\n`;\nconst DescriptionEmpty = styled('span')`\n  opacity: 0.8;\n  height: 14px;\n  width: 95%;\n  display: block;\n  position: relative;\n  ${emptyStateAnimation};\n  animation-delay: 0.125s;\n`;\nconst FooterEmpty = styled('span')`\n  opacity: 0.8;\n  height: 12px;\n  width: 30%;\n  display: block;\n  ${emptyStateAnimation} animation-delay: .25s;\n\n  ${_ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return !isLarge($cardSize) && `\n    height: 10px;\n  `;\n}};\n`;\nconst CardEmptyState = () => {\n  const {\n    props: {\n      size\n    }\n  } = useContext(GlobalContext);\n  const isSmallCard = isSmall(size);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MediaEmpty, {\n    $cardSize: size\n  }), /*#__PURE__*/React.createElement(Content, {\n    $cardSize: size\n  }, /*#__PURE__*/React.createElement(HeaderEmpty, {\n    $cardSize: size\n  }), !isSmallCard ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(DescriptionEmpty, {\n    $cardSize: size\n  }), /*#__PURE__*/React.createElement(DescriptionEmpty, {\n    $cardSize: size,\n    style: {\n      marginBottom: '12px'\n    }\n  })) : null, _FooterEmpty || (_FooterEmpty = /*#__PURE__*/React.createElement(FooterEmpty, null))));\n};\n\nconst MediaButton = styled('div')`\n  backface-visibility: hidden;\n  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));\n  transition: ${transition.short('transform')};\n  will-change: transform;\n\n  > svg {\n    display: block;\n  }\n\n  &:active:not(:focus) {\n    transform: scale(0.9);\n  }\n`;\n\nvar _path$2, _path2$2;\nconst VolumeMute = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 14 14\"\n}, props), _path$2 || (_path$2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  d: \"M15.5 6.205l-.705-.705L13 7.295 11.205 5.5l-.705.705L12.295 8 10.5 9.795l.705.705L13 8.705l1.795 1.795.705-.705L13.705 8 15.5 6.205zM9 15a.5.5 0 01-.355-.15L4.835 11H1.5a.5.5 0 01-.5-.5v-5a.5.5 0 01.5-.5h3.335l3.81-3.85a.5.5 0 01.705 0 .5.5 0 01.15.35v13a.5.5 0 01-.5.5z\",\n  transform: \"translate(-1 -1)\"\n})));\nconst VolumeUp = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 14 14\"\n}, props), _path2$2 || (_path2$2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  d: \"M13.58 4.04l-.765.645a5 5 0 01-.145 6.615l.735.7a6 6 0 00.175-7.94v-.02zM10.79 6a3 3 0 01-.09 3.97l.735.68a4 4 0 00.115-5.295L10.79 6zM9 15a.5.5 0 01-.355-.15L4.835 11H1.5a.5.5 0 01-.5-.5v-5a.5.5 0 01.5-.5h3.335l3.81-3.85a.5.5 0 01.705 0 .5.5 0 01.15.35v13a.5.5 0 01-.5.5z\",\n  transform: \"translate(-1 -1)\"\n})));\nconst BottomControls = styled('div')`\n  z-index: 2;\n  position: absolute;\n  bottom: ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return isLarge($cardSize) ? 18 : 14;\n}}px;\n  left: 0;\n  right: 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  transition: ${transition.medium('opacity')};\n  will-change: opacity;\n`;\nconst VolumeIcon = styled('svg')`\n  stroke: #fff;\n`;\nconst VolumeButton = styled(MediaButton).attrs({\n  className: classNames.volumeControl\n})`\n  ${VolumeIcon} {\n    width: ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return isLarge($cardSize) ? 16 : 14;\n}}px;\n    height: ${_ref3 => {\n  let {\n    $cardSize\n  } = _ref3;\n  return isLarge($cardSize) ? 16 : 14;\n}}px;\n\n    ${_ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return !isLarge($cardSize) && media.mobile`\n      width: 12px;\n      height: 12px;\n    `;\n}}\n  }\n`;\nconst PlaybackRateButton = styled(MediaButton).attrs({\n  className: classNames.rateControl\n})`\n  font-size: ${_ref5 => {\n  let {\n    $cardSize\n  } = _ref5;\n  return isLarge($cardSize) ? 12 : 10;\n}}px;\n  min-width: ${_ref6 => {\n  let {\n    $cardSize\n  } = _ref6;\n  return isLarge($cardSize) ? 33 : 28;\n}}px;\n  line-height: 1;\n  font-weight: bold;\n  border: 1.5px solid #fff;\n  border-radius: 9999px;\n  padding: 1px 5px;\n  text-align: center;\n  color: #fff;\n  margin-left: 10px;\n\n  ${_ref7 => {\n  let {\n    $cardSize\n  } = _ref7;\n  return !isLarge($cardSize) && media.mobile`\n    font-size: 8px;\n    margin-left: 8px;\n    min-width: 23px;\n  `;\n}}\n`;\nconst TimeLabel = styled('span').attrs({\n  className: classNames.progressTime\n})`\n  margin: ${_ref8 => {\n  let {\n    right\n  } = _ref8;\n  return !right ? '0 auto 0 0' : '0 0 0 auto';\n}};\n  font-family: ${font.mono};\n  font-size: 12px;\n  padding: 0 16px;\n  color: #fff;\n  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n`;\nconst FooterControls = _ref9 => {\n  let {\n    $cardSize,\n    currentTime,\n    endTime,\n    isMuted,\n    onMuteClick,\n    onPlaybackRateClick,\n    playbackRate\n  } = _ref9;\n  const VolumeComponent = useMemo(() => isMuted ? VolumeMute : VolumeUp, [isMuted]);\n  const isLargeCard = useMemo(() => isLarge($cardSize), [$cardSize]);\n  return /*#__PURE__*/React.createElement(BottomControls, {\n    $cardSize: $cardSize\n  }, isLargeCard && /*#__PURE__*/React.createElement(TimeLabel, null, currentTime), /*#__PURE__*/React.createElement(VolumeButton, {\n    title: isMuted ? 'Unmute' : 'Mute',\n    $cardSize: $cardSize,\n    onClick: onMuteClick\n  }, /*#__PURE__*/React.createElement(VolumeIcon, {\n    as: VolumeComponent\n  })), /*#__PURE__*/React.createElement(PlaybackRateButton, {\n    title: \"Playback Rate\",\n    $cardSize: $cardSize,\n    onClick: onPlaybackRateClick\n  }, /*#__PURE__*/React.createElement(\"span\", null, playbackRate, \"x\")), isLargeCard && /*#__PURE__*/React.createElement(TimeLabel, {\n    right: true\n  }, endTime));\n};\n\nconst _excluded$5 = [\"isPlaying\"];\nvar _path$1, _path2$1;\nconst Pause = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 16 20\"\n}, props), _path$1 || (_path$1 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  d: \"M12 6h-2a2 2 0 00-2 2v16a2 2 0 002 2h2a2 2 0 002-2V8a2 2 0 00-2-2zm10 0h-2a2 2 0 00-2 2v16a2 2 0 002 2h2a2 2 0 002-2V8a2 2 0 00-2-2z\",\n  transform: \"translate(-8 -6)\"\n})));\nconst Play = props => /*#__PURE__*/React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 21 24\"\n}, props), _path2$1 || (_path2$1 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#FFF\",\n  fillRule: \"evenodd\",\n  stroke: \"none\",\n  strokeWidth: \"1\",\n  d: \"M7 28a1 1 0 01-1-1V5a1 1 0 011.501-.865l19 11a1 1 0 010 1.73l-19 11A.998.998 0 017 28z\",\n  transform: \"translate(-6 -4)\"\n})));\nconst iconSizes = {\n  large: '50px',\n  normal: '35px',\n  small: '20px'\n};\nconst PlaybackIcon = styled('svg')`\n  stroke: #fff;\n`;\nconst PlaybackButtonWrap = styled(MediaButton).attrs({\n  className: classNames.playbackControl\n})`\n  ${PlaybackIcon} {\n    ${_ref => {\n  let {\n    $cardSize\n  } = _ref;\n  return css`\n      width: ${iconSizes[$cardSize]};\n      height: ${iconSizes[$cardSize]};\n      padding: ${isLarge($cardSize) ? 0 : '8px'};\n\n      ${!isLarge($cardSize) && !isSmall($cardSize) && media.mobile`\n        width: calc(${iconSizes.small} * 1.2);\n        height: calc(${iconSizes.small} * 1.2);\n      `}\n    `;\n}}\n  }\n`;\nconst PlaybackButton = _ref2 => {\n  let {\n      isPlaying\n    } = _ref2,\n    props = _objectWithoutProperties(_ref2, _excluded$5);\n  const PlaybackComponent = useMemo(() => isPlaying ? Pause : Play, [isPlaying]);\n  return /*#__PURE__*/React.createElement(PlaybackButtonWrap, _extends({\n    title: isPlaying ? 'Pause' : 'Play'\n  }, props), /*#__PURE__*/React.createElement(PlaybackIcon, {\n    as: PlaybackComponent\n  }));\n};\n\nconst SCRUBBER_SIZE = 12;\nconst scrubberSizeScales = {\n  normal: 0.8,\n  small: 0.9\n};\nconst getScrubberSize = size => Math.floor(SCRUBBER_SIZE * (scrubberSizeScales[size] || 1));\nconst Scrubber = styled('div').attrs(_ref => {\n  let {\n    isVisible,\n    positionX\n  } = _ref;\n  return {\n    style: {\n      left: positionX,\n      transform: `scale(${isVisible ? 1 : 0.5}) translate(-50%, -50%)`,\n      opacity: isVisible ? 1 : 0,\n      visibility: isVisible ? 'visible' : 'hidden'\n    }\n  };\n})`\n  position: absolute;\n  top: 50%;\n  background: #ffffff;\n  border-radius: 50%;\n  transform-origin: center center;\n  box-shadow: 0 1px 4px rgba(0, 0, 0, 0.1);\n  transition: ${transition.short('transform', 'opacity', 'visibility')};\n  will-change: left, transform, opacity, visibility;\n  backface-visibility: hidden;\n  z-index: 3;\n\n  ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  const scrubberSize = getScrubberSize($cardSize);\n  return css`\n      height: ${scrubberSize}px;\n      width: ${scrubberSize}px;\n    `;\n}}\n`;\n\nconst _excluded$4 = [\"isDragging\", \"isVisible\", \"label\", \"positionX\", \"size\"];\nconst BASE_FONT_SIZE = 11;\nconst sizeScales$1 = {\n  normal: 0.8\n};\nconst getMarkerFontSize = size => BASE_FONT_SIZE * (sizeScales$1[size] || 1);\nconst TooltipBase = styled('span').attrs(_ref => {\n  let {\n    position,\n    isDragging,\n    visible\n  } = _ref;\n  return {\n    style: {\n      left: `${position}px`,\n      top: visible ? '-4px' : '0px',\n      visibility: visible ? 'visible' : 'hidden',\n      opacity: visible ? 1 : 0,\n      transform: `translate(-50%, ${!isDragging ? -100 : -110}%)`\n    }\n  };\n})`\n  position: absolute;\n  background: rgba(24, 25, 25, 0.75);\n  color: #fff;\n  text-shadow: 0 1px 2px rgba(24, 25, 25, 0.15);\n  padding: 2px 3px;\n  border-radius: 4px;\n  font-family: ${font.mono};\n  font-size: ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return getMarkerFontSize($cardSize);\n}}px;\n  line-height: 1;\n  transition: ${transition.medium('opacity', 'visibility', 'transform')},\n    ${transition.long('top')};\n  will-change: top, left, visibility, opacity, transform;\n  backface-visibility: hidden;\n`;\nconst Tooltip = /*#__PURE__*/forwardRef((_ref3, ref) => {\n  let {\n      isDragging,\n      isVisible,\n      label,\n      positionX,\n      size\n    } = _ref3,\n    props = _objectWithoutProperties(_ref3, _excluded$4);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TooltipBase, _extends({\n    visible: isVisible,\n    position: positionX,\n    $cardSize: size,\n    ref: ref,\n    isDragging: isDragging\n  }, props), label));\n});\nTooltip.displayName = 'Tooltip';\n\nconst _excluded$3 = [\"key\"];\nconst HEIGHT$1 = 6;\nconst PADDING = 6;\nconst heightScales = {\n  normal: 0.7,\n  small: 0.6\n};\nconst activeHeightScales = {\n  small: 0.9,\n  large: 1.4\n};\nconst getProgressBarHeight = size => Math.floor(HEIGHT$1 * (heightScales[size] || 1));\nconst getProgressBarActiveHeight = size => Math.floor(HEIGHT$1 * (activeHeightScales[size] || 1));\nconst OuterWrap$1 = styled('div').attrs(() => ({\n  className: classNames.progressBar\n}))`\n  position: relative;\n  padding: ${PADDING}px ${PADDING / 2}px ${PADDING / 2}px;\n  z-index: 2;\n  backface-visibility: hidden;\n`;\nconst BarsWrap = styled('div').attrs(_ref => {\n  let {\n    $cardSize,\n    isDragging\n  } = _ref;\n  if (isDragging) {\n    const activeHeight = getProgressBarActiveHeight($cardSize);\n    return {\n      style: {\n        height: `${activeHeight}px`\n      }\n    };\n  }\n  return {};\n})`\n  background: transparent;\n  border-radius: 9999px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n  background: rgba(255, 255, 255, 0.15);\n  transition: ${transition.short('height')};\n  will-change: height;\n  pointer-events: none;\n  position: relative;\n\n  ${_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  const height = getProgressBarHeight($cardSize);\n  const activeHeight = getProgressBarActiveHeight($cardSize);\n  return css`\n      height: ${height}px;\n\n      ${OuterWrap$1}:hover & {\n        height: ${activeHeight}px;\n      }\n    `;\n}}\n`;\nconst ProgressLine = styled('div')`\n  border-radius: inherit;\n  height: 100%;\n  position: relative;\n  overflow: hidden;\n`;\nconst ProgressMask = styled('div').attrs(_ref3 => {\n  let {\n    maskScale\n  } = _ref3;\n  return {\n    style: {\n      transform: `scaleX(${maskScale})`\n    }\n  };\n})`\n  position: absolute;\n  left: 0;\n  top: -50%;\n  height: 200%;\n  width: 100%;\n  background: #ffffff;\n  transform-origin: left center;\n  will-change: transform;\n`;\nconst ProgressHover = styled('div').attrs(_ref4 => {\n  let {\n    cursorRatio,\n    isHovering,\n    progressPercent\n  } = _ref4;\n  return {\n    style: {\n      left: progressPercent,\n      transform: `scaleX(${cursorRatio})`,\n      opacity: isHovering ? 1 : 0,\n      visibility: isHovering ? 'visible' : 'hidden'\n    }\n  };\n})`\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  background: rgba(255, 255, 255, 0.4);\n  transform-origin: left center;\n  transition: ${transition.short('opacity', 'visibility')};\n  will-change: left, transform, opacity, visible;\n`;\nconst BufferedChunk = styled('div').attrs(_ref5 => {\n  let {\n    start,\n    end\n  } = _ref5;\n  return {\n    style: {\n      left: `${start}px`,\n      right: `${end}px`\n    }\n  };\n})`\n  background: rgba(255, 255, 255, 0.35);\n  position: absolute;\n  top: 0;\n  bottom: 0;\n`;\nconst ProgressBar = _ref6 => {\n  let {\n    bufferedMedia,\n    cursorX,\n    duration,\n    hoveredTime,\n    isDragging,\n    isHovering,\n    onClick,\n    onMouseDown,\n    onMouseOver,\n    progress,\n    showTooltip\n  } = _ref6;\n  const {\n    props: {\n      size\n    }\n  } = useContext(GlobalContext);\n  const wrapRef = useRef();\n  const tooltipRef = useRef();\n  const isSmallCard = useMemo(() => isSmall(size), [size]);\n  const getWrapWidth = useCallback(() => {\n    if (wrapRef.current) {\n      return wrapRef.current.getBoundingClientRect().width - PADDING;\n    }\n    return 0;\n  }, []);\n  const progressRatio = useMemo(() => clampNumber(progress / duration, 0, 1), [duration, progress]);\n  const progressPercent = useMemo(() => `${clampNumber(progressRatio * 100, 1, 99)}%`, [progressRatio]);\n  const cursorRatio = useMemo(() => {\n    if (wrapRef.current) {\n      const wrapWidth = getWrapWidth();\n      const startPoint = progressRatio * wrapWidth;\n      const cursorPosition = cursorX - startPoint;\n      const width = wrapWidth - startPoint;\n      if (cursorPosition > 0) {\n        return clampNumber((cursorPosition / width).toFixed(3), 0, 0.99);\n      }\n    }\n    return 0;\n  }, [cursorX, getWrapWidth, progressRatio]);\n  const bufferedMediaChunks = useMemo(() => {\n    const wrapWidth = getWrapWidth();\n    return bufferedMedia.map((chunk, key) => {\n      const start = chunk.start * wrapWidth;\n      const end = wrapWidth - chunk.end * wrapWidth;\n      return {\n        key,\n        start,\n        end\n      };\n    });\n  }, [bufferedMedia, getWrapWidth]);\n  const tooltipLabel = useMemo(() => formatSeconds(hoveredTime), [hoveredTime]);\n  const tooltipPositionX = useMemo(() => {\n    if (wrapRef.current && tooltipRef.current) {\n      const wrapWidth = getWrapWidth();\n      const tooltipWidth = tooltipRef.current.getBoundingClientRect().width;\n      const tooltipHalf = tooltipWidth / 2;\n      return clampNumber(cursorX, tooltipHalf, wrapWidth - tooltipHalf);\n    }\n    return 0;\n  }, [cursorX, getWrapWidth]);\n  const mouseEvents = useMemo(() => ({\n    onClick,\n    onMouseDown,\n    onMouseOver\n  }), [onClick, onMouseDown, onMouseOver]);\n  const showAccessories = useMemo(() => isDragging || isHovering, [isDragging, isHovering]);\n  return /*#__PURE__*/React.createElement(OuterWrap$1, _extends({\n    $cardSize: size,\n    ref: wrapRef\n  }, mouseEvents), /*#__PURE__*/React.createElement(BarsWrap, {\n    $cardSize: size,\n    isDragging: isDragging\n  }, /*#__PURE__*/React.createElement(ProgressLine, null, /*#__PURE__*/React.createElement(ProgressHover, {\n    cursorRatio: cursorRatio,\n    isHovering: isHovering,\n    progressPercent: progressPercent\n  }), bufferedMediaChunks.map(_ref7 => {\n    let {\n        key\n      } = _ref7,\n      chunk = _objectWithoutProperties(_ref7, _excluded$3);\n    return /*#__PURE__*/React.createElement(BufferedChunk, _extends({\n      key: key\n    }, chunk));\n  }), /*#__PURE__*/React.createElement(ProgressMask, {\n    maskScale: progressRatio\n  })), /*#__PURE__*/React.createElement(Scrubber, {\n    $cardSize: size,\n    isVisible: showAccessories,\n    positionX: progressPercent\n  }), !isSmallCard && /*#__PURE__*/React.createElement(Tooltip, {\n    isDragging: isDragging,\n    isVisible: showAccessories,\n    label: tooltipLabel,\n    positionX: tooltipPositionX,\n    ref: tooltipRef,\n    size: size\n  })));\n};\n\nvar _path, _path2;\nconst _excluded$2 = [\"$cardSize\"],\n  _excluded2 = [\"$cardSize\"],\n  _excluded3 = [\"type\", \"$cardSize\"];\nconst Backward = _ref => {\n  let props = _objectWithoutProperties(_ref, _excluded$2);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 29\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#FFF\",\n    fillRule: \"evenodd\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    d: \"M4 18c0 6.627 5.373 12 12 12s12-5.373 12-12S22.627 6 16 6h-4V1L6 7l6 6V8h4c5.523 0 10 4.477 10 10s-4.477 10-10 10S6 23.523 6 18H4zm15.63 4.13a2.84 2.84 0 01-1.28-.27 2.44 2.44 0 01-.89-.77 3.57 3.57 0 01-.52-1.25 7.69 7.69 0 01-.17-1.68 7.83 7.83 0 01.17-1.68c.094-.445.27-.87.52-1.25.23-.325.535-.59.89-.77.4-.188.838-.28 1.28-.27a2.44 2.44 0 012.16 1 5.23 5.23 0 01.7 2.93 5.23 5.23 0 01-.7 2.93 2.44 2.44 0 01-2.16 1.08zm0-1.22c.411.025.8-.19 1-.55a3.38 3.38 0 00.37-1.51v-1.38a3.31 3.31 0 00-.29-1.5 1.23 1.23 0 00-2.06 0 3.31 3.31 0 00-.29 1.5v1.38a3.38 3.38 0 00.29 1.51c.195.356.575.57.98.55zm-9 1.09v-1.18h2v-5.19l-1.86 1-.55-1.06 2.32-1.3H14v6.5h1.78V22h-5.15z\",\n    transform: \"translate(-4 -1)\"\n  })));\n};\nconst Forward = _ref2 => {\n  let props = _objectWithoutProperties(_ref2, _excluded2);\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 29\"\n  }, props), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    fill: \"#FFF\",\n    fillRule: \"evenodd\",\n    stroke: \"none\",\n    strokeWidth: \"1\",\n    d: \"M26 18c0 5.523-4.477 10-10 10S6 23.523 6 18 10.477 8 16 8h4v5l6-6-6-6v5h-4C9.373 6 4 11.373 4 18s5.373 12 12 12 12-5.373 12-12h-2zm-6.36 4.13a2.81 2.81 0 01-1.28-.27 2.36 2.36 0 01-.89-.77 3.39 3.39 0 01-.47-1.25 7.12 7.12 0 01-.17-1.68 7.24 7.24 0 01.17-1.68 3.46 3.46 0 01.52-1.25 2.36 2.36 0 01.89-.77c.4-.19.838-.282 1.28-.27a2.44 2.44 0 012.16 1 5.31 5.31 0 01.7 2.93 5.31 5.31 0 01-.7 2.93 2.44 2.44 0 01-2.21 1.08zm0-1.22a1 1 0 001-.55c.22-.472.323-.99.3-1.51v-1.38a3.17 3.17 0 00-.3-1.5 1.22 1.22 0 00-2.05 0 3.18 3.18 0 00-.29 1.5v1.38a3.25 3.25 0 00.29 1.51 1 1 0 001.05.55zm-7.02-3.49c.355.035.71-.06 1-.27a.84.84 0 00.31-.68v-.08a.94.94 0 00-.3-.74 1.2 1.2 0 00-.83-.27 1.65 1.65 0 00-.89.24 2.1 2.1 0 00-.68.68l-.93-.83a5.37 5.37 0 01.44-.51 2.7 2.7 0 01.54-.4 2.55 2.55 0 01.7-.27 3.25 3.25 0 01.87-.1 3.94 3.94 0 011.06.14c.297.078.576.214.82.4.224.168.408.383.54.63.123.26.184.543.18.83a2 2 0 01-.11.67 1.82 1.82 0 01-.32.52 1.79 1.79 0 01-.47.36 2.27 2.27 0 01-.57.2V18c.219.04.431.11.63.21a1.7 1.7 0 01.85.93c.084.234.124.481.12.73a2 2 0 01-.2.92 2 2 0 01-.58.72 2.66 2.66 0 01-.89.45 3.76 3.76 0 01-1.15.16 4.1 4.1 0 01-1-.11 3.1 3.1 0 01-.76-.31 2.76 2.76 0 01-.56-.45 4.22 4.22 0 01-.44-.55l1.07-.81c.082.147.175.288.28.42.105.128.226.243.36.34.137.097.29.171.45.22a2 2 0 00.57.07 1.45 1.45 0 001-.3 1.12 1.12 0 00.34-.85v-.08a1 1 0 00-.37-.8 1.78 1.78 0 00-1.06-.28h-.76v-1.21h.74z\",\n    transform: \"translate(-4 -1)\"\n  })));\n};\nconst SeekIcon = styled('svg')`\n  stroke: #fff;\n  width: ${_ref3 => {\n  let {\n    $cardSize\n  } = _ref3;\n  return isLarge($cardSize) ? 30 : 24;\n}}px;\n  height: ${_ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return isLarge($cardSize) ? 30 : 24;\n}}px;\n\n  ${_ref5 => {\n  let {\n    $cardSize\n  } = _ref5;\n  return !isLarge($cardSize) && media.mobile`\n    width: 0;\n    height: 0;\n  `;\n}}\n`;\nconst SeekButtonWrap = styled(MediaButton)`\n  margin: 0 ${_ref6 => {\n  let {\n    $cardSize\n  } = _ref6;\n  return isLarge($cardSize) ? '28px' : '3px';\n}};\n`;\nconst SeekButton = _ref7 => {\n  let {\n      type = 'rewind',\n      $cardSize\n    } = _ref7,\n    props = _objectWithoutProperties(_ref7, _excluded3);\n  const IconComponent = useMemo(() => type === 'rewind' ? Backward : Forward, [type]);\n  return /*#__PURE__*/React.createElement(SeekButtonWrap, _extends({\n    title: type === 'rewind' ? 'Rewind' : 'Forward',\n    $cardSize: $cardSize\n  }, props), /*#__PURE__*/React.createElement(SeekIcon, {\n    as: IconComponent,\n    $cardSize: $cardSize\n  }));\n};\n\nvar _Svg;\nconst BASE_SIZE = 12;\nconst BASE_OFFSET = 6;\nconst offsetScales = {\n  normal: 0.8,\n  small: 0.6\n};\nconst sizeScales = {\n  normal: 0.9,\n  small: 0.8\n};\nconst getSpinnerOffset = size => Math.floor(BASE_OFFSET * (offsetScales[size] || 1));\nconst getSpinnerSize = size => Math.floor(BASE_SIZE * (sizeScales[size] || 1));\nconst rotate = keyframes`\n  100% {\n    transform: rotate(360deg);\n  }\n`;\nconst dash = keyframes`\n  0% {\n    stroke-dasharray: 1, 150;\n    stroke-dashoffset: 0;\n  }\n  50% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -35;\n  }\n  100% {\n    stroke-dasharray: 90, 150;\n    stroke-dashoffset: -124;\n  }\n`;\nconst Wrap = styled(MediaButton).attrs(_ref => {\n  let {\n    isVisible\n  } = _ref;\n  return {\n    style: {\n      opacity: isVisible ? 1 : 0,\n      visibility: isVisible ? 'visible' : 'hidden'\n    }\n  };\n})(_ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  const size = `${getSpinnerSize($cardSize)}px`;\n  const offset = `${getSpinnerOffset($cardSize)}px`;\n  return css`\n    position: absolute;\n    width: ${size};\n    right: ${offset};\n    top: ${offset};\n    transition: ${transition.medium('opacity', 'visibility')};\n    will-change: opacity, visibility;\n    pointer-events: none;\n  `;\n});\nconst Svg = styled('svg')`\n  width: 100%;\n  animation: ${rotate} 2s linear infinite;\n  will-change: transform;\n`;\nconst Circle = styled('circle')`\n  stroke: #fff;\n  stroke-linecap: round;\n  stroke-width: 7;\n  fill: none;\n  animation: ${dash} 1.5s ease-in-out infinite;\n  will-change: stroke-dasharray, stroke-dashoffset;\n`;\nconst Spinner = _ref3 => {\n  let {\n    size,\n    isVisible\n  } = _ref3;\n  return /*#__PURE__*/React.createElement(Wrap, {\n    $cardSize: size,\n    className: classNames.spinner,\n    isVisible: isVisible\n  }, _Svg || (_Svg = /*#__PURE__*/React.createElement(Svg, {\n    viewBox: \"0 0 50 50\"\n  }, /*#__PURE__*/React.createElement(Circle, {\n    cx: \"25\",\n    cy: \"25\",\n    r: \"20\"\n  }))));\n};\n\nconst SPACE_KEY = 32;\nconst L_ARROW_KEY = 37;\nconst R_ARROW_KEY = 39;\nconst M_KEY = 77;\nconst OuterWrap = styled('div').attrs({\n  className: classNames.mediaControls\n})`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  transition: ${transition.long('background')}, ${transition.medium('opacity')};\n  will-change: background;\n  display: flex;\n  flex-direction: column;\n  pointer-events: auto;\n\n  ${_ref => {\n  let {\n    hasInteracted,\n    isDragging,\n    isPlaying\n  } = _ref;\n  const bg = 'rgba(0, 0, 0, 0.35)';\n  const dragBg = 'rgba(0, 0, 0, 0.2)';\n  const isPaused = hasInteracted && !isPlaying;\n  return css`\n      .${classNames.main}:hover & {\n        background: ${!isDragging ? bg : dragBg};\n      }\n\n      .${classNames.main}:not(:hover) & {\n        opacity: ${!hasInteracted || isPaused ? 1 : 0};\n        ${isPaused && `background: ${bg}`};\n      }\n    `;\n}}\n`;\nconst InnerWrap = styled('div')`\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 2;\n`;\nconst ControlsTop = styled('div')`\n  flex: 1;\n\n  ${_ref2 => {\n  let {\n    isVisible\n  } = _ref2;\n  return !isVisible && css`\n      *[class*='${classNames.mediaControls}']:not(.${classNames.progressTime}) {\n        transition: ${transition.medium('opacity', 'visibility')};\n        opacity: 0;\n        visibility: hidden;\n      }\n    `;\n}}\n`;\nconst getNextPlaybackRate = rate => {\n  switch (rate) {\n    case 1:\n      return 1.25;\n    case 1.25:\n      return 1.5;\n    case 1.5:\n      return 2;\n    default:\n      return 1;\n  }\n};\nconst Controls = _ref3 => {\n  let {\n    MediaComponent,\n    mediaProps\n  } = _ref3;\n  const {\n    props: {\n      autoPlay,\n      controls,\n      mediaRef: propRef,\n      muted,\n      loop,\n      size\n    }\n  } = useContext(GlobalContext);\n  const [duration, setDuration] = useState(0);\n  const [progress, setProgress] = useState(0);\n  const [buffered, setBuffered] = useState([]);\n  const [cursorX, setCursorX] = useState(0);\n  const [hoveredTime, setHoveredTime] = useState(0);\n  const [isPlaying, setIsPlaying] = useState(autoPlay);\n  const [isMuted, setIsMuted] = useState(muted);\n  const [isBuffering, setIsBuffering] = useState(false);\n  const [isHovering, setIsHovering] = useState(false);\n  const [isDragging, setIsDragging] = useState(false);\n  const [playbackRate, setPlaybackRate] = useState(1);\n  const [hasInteracted, setHasInteracted] = useState(autoPlay);\n  const [pausedByDrag, setPausedByDrag] = useState(false);\n  const mediaRef = useRef();\n  const setRefs = useCallback(node => {\n    mediaRef.current = node;\n    if (propRef) {\n      if (isFunction(propRef)) {\n        propRef(node);\n      } else {\n        propRef.current = node;\n      }\n    }\n  }, [propRef]);\n  const isNotSmall = useMemo(() => !isSmall(size), [size]);\n  const mediaEvents = useMemo(() => ({\n    onCanPlay: () => setIsBuffering(false),\n    onLoadedMetadata: e => setDuration(e.currentTarget.duration),\n    onPause: () => setIsPlaying(false),\n    onPlay: () => setIsPlaying(true),\n    onPlaying: () => setIsBuffering(false),\n    onProgress: e => setBuffered(e.currentTarget.buffered),\n    onRateChange: e => setPlaybackRate(e.currentTarget.playbackRate),\n    onTimeUpdate: e => setProgress(e.currentTarget.currentTime),\n    onVolumeChange: e => setIsMuted(e.currentTarget.muted),\n    onWaiting: e => setIsBuffering(true)\n  }), []);\n  const evaluateCursorPosition = useCallback(event => {\n    if (mediaRef.current) {\n      const bounds = event.currentTarget.getBoundingClientRect();\n      const cursor = clampNumber(Math.floor(event.clientX - bounds.left), 0, bounds.width);\n      const time = cursor / bounds.width * mediaRef.current.duration;\n      return {\n        cursor,\n        time\n      };\n    }\n    return {\n      cursor: 0,\n      time: 0\n    };\n  }, []);\n  const togglePlayback = useCallback(() => {\n    if (mediaRef.current) {\n      if (mediaRef.current.paused) {\n        if (!hasInteracted) {\n          setHasInteracted(true);\n        }\n        mediaRef.current.play();\n      } else {\n        mediaRef.current.pause();\n      }\n    }\n  }, [hasInteracted]);\n  const jumpTo = useCallback(time => {\n    if (mediaRef.current) {\n      const t = clampNumber(time, 0, mediaRef.current.duration);\n      mediaRef.current.currentTime = t;\n      setProgress(t);\n    }\n  }, []);\n  const onSeekClick = useCallback((event, type) => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (mediaRef.current) {\n      const {\n        currentTime\n      } = mediaRef.current;\n      jumpTo(type === 'rewind' ? currentTime - 10 : currentTime + 30);\n    }\n  }, [jumpTo]);\n  const onMuteClick = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (mediaRef.current) {\n      mediaRef.current.muted = !mediaRef.current.muted;\n    }\n  }, []);\n  const onPlaybackRateClick = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (mediaRef.current) {\n      mediaRef.current.playbackRate = getNextPlaybackRate(mediaRef.current.playbackRate);\n    }\n  }, []);\n  const onProgressBarClick = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(false);\n  }, []);\n  const onProgressBarMouseDown = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setIsDragging(true);\n    const {\n      time\n    } = evaluateCursorPosition(event);\n    jumpTo(time);\n  }, [evaluateCursorPosition, jumpTo]);\n  const onProgressBarMouseOver = useCallback(() => setIsHovering(true), []);\n  const onWrapClick = useCallback(event => {\n    event.preventDefault();\n    event.stopPropagation();\n    if (isDragging) {\n      setIsDragging(false);\n    } else {\n      togglePlayback();\n    }\n  }, [isDragging, togglePlayback]);\n  const onWrapMouseMove = useCallback(event => {\n    if ((isDragging || isHovering) && mediaRef.current) {\n      event.preventDefault();\n      const {\n        cursor,\n        time\n      } = evaluateCursorPosition(event);\n      setHoveredTime(time);\n      setCursorX(cursor);\n      if (isDragging) {\n        if (!mediaRef.current.paused) {\n          mediaRef.current.pause();\n          setPausedByDrag(true);\n        }\n        jumpTo(time);\n      }\n    }\n  }, [evaluateCursorPosition, isDragging, isHovering, jumpTo]);\n  const onWrapMouseOver = useCallback(event => {\n    if (isDragging && event.buttons === 0) {\n      setIsDragging(false);\n    }\n  }, [isDragging]);\n  const onWrapKeyDown = useCallback(event => {\n    if (isDragging) {\n      return;\n    }\n    const {\n      keyCode\n    } = event;\n    if ([SPACE_KEY, L_ARROW_KEY, R_ARROW_KEY, M_KEY].includes(keyCode) && mediaRef.current) {\n      event.preventDefault();\n      switch (keyCode) {\n        case SPACE_KEY:\n          togglePlayback();\n          break;\n        case L_ARROW_KEY:\n          jumpTo(mediaRef.current.currentTime - 5);\n          break;\n        case R_ARROW_KEY:\n          jumpTo(mediaRef.current.currentTime + 5);\n          break;\n        case M_KEY:\n          mediaRef.current.muted = !mediaRef.current.muted;\n          break;\n      }\n    }\n  }, [isDragging, jumpTo, togglePlayback]);\n  const outerWrapEvents = useMemo(() => ({\n    onClick: onWrapClick,\n    onKeyDown: onWrapKeyDown,\n    onMouseMove: onWrapMouseMove,\n    onMouseOut: () => setIsHovering(false),\n    onMouseOver: onWrapMouseOver\n  }), [onWrapClick, onWrapKeyDown, onWrapMouseMove, onWrapMouseOver]);\n  const outerWrapTitle = useMemo(() => hasInteracted ? {\n    title: ''\n  } : {}, [hasInteracted]);\n  const bufferedMedia = useMemo(() => {\n    if (buffered && buffered.length && mediaRef.current) {\n      return [...Array(buffered.length).keys()].map(index => {\n        return {\n          start: buffered.start(index) / mediaRef.current.duration,\n          end: buffered.end(index) / mediaRef.current.duration\n        };\n      });\n    }\n    return [];\n  }, [buffered]);\n  const currentTime = useMemo(() => formatSeconds(progress || 0), [progress]);\n  const endTime = useMemo(() => formatSeconds(duration || 0), [duration]);\n  const footerControlsProps = useMemo(() => ({\n    $cardSize: size,\n    currentTime,\n    endTime,\n    isMuted,\n    onMuteClick,\n    onPlaybackRateClick,\n    playbackRate\n  }), [currentTime, endTime, isMuted, onMuteClick, onPlaybackRateClick, playbackRate, size]);\n  const progressBarProps = useMemo(() => ({\n    bufferedMedia,\n    cursorX,\n    duration,\n    hoveredTime,\n    isDragging,\n    isHovering,\n    onClick: onProgressBarClick,\n    onMouseDown: onProgressBarMouseDown,\n    onMouseOver: onProgressBarMouseOver,\n    progress,\n    showTooltip: isDragging || isHovering\n  }), [bufferedMedia, cursorX, duration, hoveredTime, isDragging, isHovering, onProgressBarClick, onProgressBarMouseDown, onProgressBarMouseOver, progress]);\n  useEffect(() => {\n    if (!isDragging && pausedByDrag && mediaRef.current && mediaRef.current.paused) {\n      mediaRef.current.play();\n      setPausedByDrag(false);\n    }\n  }, [pausedByDrag, isDragging]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MediaComponent, _extends({}, mediaProps, mediaEvents, {\n    ref: setRefs,\n    autoPlay: autoPlay,\n    loop: loop,\n    muted: muted\n  })), controls && /*#__PURE__*/React.createElement(OuterWrap, _extends({}, outerWrapTitle, {\n    tabIndex: 0,\n    hasInteracted: hasInteracted,\n    isDragging: isDragging,\n    isPlaying: isPlaying\n  }, outerWrapEvents), /*#__PURE__*/React.createElement(Spinner, {\n    size: size,\n    isVisible: isBuffering\n  }), !hasInteracted ? /*#__PURE__*/React.createElement(InnerWrap, null, /*#__PURE__*/React.createElement(PlaybackButton, {\n    $cardSize: size\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(ControlsTop, {\n    isVisible: !isDragging\n  }, /*#__PURE__*/React.createElement(InnerWrap, null, isNotSmall && /*#__PURE__*/React.createElement(SeekButton, {\n    className: classNames.rwControl,\n    type: \"rewind\",\n    $cardSize: size,\n    onClick: event => onSeekClick(event, 'rewind')\n  }), /*#__PURE__*/React.createElement(PlaybackButton, {\n    $cardSize: size,\n    isPlaying: isPlaying\n  }), isNotSmall && /*#__PURE__*/React.createElement(SeekButton, {\n    className: classNames.ffwControl,\n    type: \"fastforward\",\n    $cardSize: size,\n    onClick: event => onSeekClick(event, 'fastforward')\n  })), isNotSmall && /*#__PURE__*/React.createElement(FooterControls, footerControlsProps)), /*#__PURE__*/React.createElement(ProgressBar, progressBarProps))));\n};\n\nconst VideoDOM = styled('video')`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  &::media-controls-start-playback-button {\n    display: none;\n    appearance: none;\n  }\n`;\nconst Video = props => {\n  const {\n    state: {\n      imageUrl,\n      playsInline,\n      videoUrl\n    }\n  } = useContext(GlobalContext);\n  const mediaProps = useMemo(() => {\n    const mediaProps = {\n      className: `${classNames.media} ${classNames.video}`,\n      src: videoUrl,\n      playsInline\n    };\n    if (imageUrl) mediaProps.poster = imageProxy(imageUrl);\n    return mediaProps;\n  }, [imageUrl, playsInline, videoUrl]);\n  return /*#__PURE__*/React.createElement(Wrap$1, _extends({\n    className: `${classNames.mediaWrapper} ${classNames.videoWrapper}`\n  }, props), /*#__PURE__*/React.createElement(Controls, {\n    MediaComponent: VideoDOM,\n    mediaProps: mediaProps\n  }));\n};\n\nconst Audio = props => {\n  const {\n    state: {\n      audioUrl\n    }\n  } = useContext(GlobalContext);\n  const mediaProps = useMemo(() => ({\n    className: `${classNames.media} ${classNames.audio}`,\n    src: audioUrl\n  }), [audioUrl]);\n  return (\n    /*#__PURE__*/\n    // eslint-disable-next-line\n    React.createElement(ImageComponent, _extends({\n      className: `${classNames.mediaWrapper} ${classNames.audioWrapper}`\n    }, props), /*#__PURE__*/React.createElement(Controls, {\n      MediaComponent: \"audio\",\n      mediaProps: mediaProps\n    }))\n  );\n};\n\nconst isUrl = url => getUrlPath(url) !== null;\nconst MEDIA_COMPONENT = {\n  video: Video,\n  image: ImageComponent,\n  audio: Audio\n};\nconst getMediaType = (isAudio, isVideo) => {\n  if (isAudio) return 'audio';\n  if (isVideo) return 'video';\n  return 'image';\n};\nconst CardMedia = () => {\n  const {\n    state: {\n      imageUrl,\n      isAudio,\n      isVideo\n    }\n  } = useContext(GlobalContext);\n  const [isLoading, setIsLoading] = useState(isUrl(imageUrl));\n  const mediaType = getMediaType(isAudio, isVideo);\n  const MediaComponent = MEDIA_COMPONENT[mediaType];\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(MediaComponent, {\n    $isLoading: isLoading\n  }), isLoading && /*#__PURE__*/React.createElement(ImageLoadCatcher, {\n    src: imageUrl,\n    onLoad: () => setIsLoading(false)\n  }));\n};\n\nconst _excluded$1 = [\"href\", \"rel\", \"target\"];\nfunction ownKeys$1(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread$1(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys$1(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys$1(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nconst HEIGHT = '382px';\nconst contrastStyle = _ref => {\n  let {\n    backgroundColor,\n    color\n  } = _ref;\n  return css`\n  background-color: ${backgroundColor};\n  border-color: ${color};\n  transition-property: filter;\n  will-change: filter;\n\n  &&& {\n    color: ${color};\n  }\n\n  &:hover {\n    filter: brightness(90%);\n  }\n`;\n};\nconst largeStyle = css`\n  flex-direction: column;\n  height: ${HEIGHT};\n  ${media.mobile`\n    height: calc(${HEIGHT} * 7/9);\n  `};\n`;\nconst hoverStyle = css`\n  transition-property: background, border-color;\n  will-change: background, border-color;\n  &:hover {\n    background-color: var(--microlink-hover-background-color, #f5f8fa);\n    border-color: var(--microlink-hover-border-color, #8899a680);\n  }\n`;\nconst rtlStyle = _ref2 => {\n  let {\n    $cardSize\n  } = _ref2;\n  return css`\n  flex-direction: ${isLarge($cardSize) ? 'column-reverse' : 'row-reverse'};\n`;\n};\nconst baseStyle = css(() => `\n  max-width: var(--microlink-max-width, 500px);\n  background-color: var(--microlink-background-color, #fff);\n  border-width: var(--microlink-border-width, 1px);\n  border-style: var(--microlink-border-style, solid);\n  border-color: var(--microlink-border-color, #e1e8ed);\n  color: var(--microlink-color, #181919);\n  overflow: hidden;\n  font-family: ${font.sans};\n  display: flex;\n  text-decoration: none;\n  opacity: 1;\n  position: relative;\n  transition-duration: ${speed.medium};\n  transition-timing-function: ${animation.medium};\n\n  &:active,\n  &:hover {\n    outline: 0;\n  }\n`);\nconst Element = styled('a')(baseStyle, _ref3 => {\n  let {\n    $isLoading,\n    contrast\n  } = _ref3;\n  return !$isLoading && !contrast && hoverStyle;\n}, _ref4 => {\n  let {\n    $cardSize\n  } = _ref4;\n  return isLarge($cardSize) && largeStyle;\n}, _ref5 => {\n  let {\n    direction\n  } = _ref5;\n  return direction === 'rtl' && rtlStyle;\n}, _ref6 => {\n  let {\n    backgroundColor,\n    color,\n    contrast\n  } = _ref6;\n  return contrast && color && backgroundColor && contrastStyle;\n}, _ref7 => {\n  let {\n    backgroundColor,\n    color,\n    contrast\n  } = _ref7;\n  return contrast && (!color || !backgroundColor) && hoverStyle;\n});\nconst CardWrap = /*#__PURE__*/forwardRef((_ref8, ref) => {\n  let {\n      href,\n      rel,\n      target\n    } = _ref8,\n    restProps = _objectWithoutProperties(_ref8, _excluded$1);\n  const {\n    state: {\n      backgroundColor,\n      color,\n      title\n    },\n    props: {\n      size: $cardSize\n    }\n  } = useContext(GlobalContext);\n  return /*#__PURE__*/createElement(Element, _objectSpread$1(_objectSpread$1(_objectSpread$1({}, restProps.as === 'a' ? {\n    href,\n    rel,\n    target\n  } : undefined), restProps), {}, {\n    backgroundColor,\n    $cardSize,\n    color,\n    ref,\n    title\n  }));\n});\nCardWrap.displayName = 'CardWrap';\nCardWrap.defaultProps = {\n  as: 'a',\n  rel: 'noopener noreferrer',\n  target: '_blank'\n};\n\n/* global IntersectionObserver */\n\nconst useIntersectionObserver = (enabled, options) => {\n  const [hasIntersected, setHasIntersected] = useState(false);\n  const refCallback = useCallback(node => {\n    if (enabled) {\n      const onIntersect = (_ref, self) => {\n        let [entry] = _ref;\n        if (entry.isIntersecting) {\n          setHasIntersected(true);\n          self.unobserve(entry.target);\n        }\n      };\n      const observer = new IntersectionObserver(onIntersect, options);\n      if (node !== null) {\n        observer.observe(node);\n      }\n    } else {\n      setHasIntersected(true);\n    }\n  }, [enabled, options]);\n  return [hasIntersected, refCallback];\n};\n\nvar _CardEmpty, _CardMedia, _CardContent;\nconst _excluded = [\"className\", \"fetchData\", \"lazy\", \"loading\", \"media\", \"setData\", \"url\", \"apiKey\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nconst Card = props => {\n  const {\n      className,\n      fetchData,\n      lazy,\n      loading,\n      media: mediaProp,\n      setData,\n      url,\n      apiKey // destructuring to avoid pass it\n    } = props,\n    restProps = _objectWithoutProperties(props, _excluded);\n  const mediaProps = useMemo(() => castArray(mediaProp), [mediaProp]);\n  const {\n    updateState\n  } = useContext(GlobalContext);\n  const [loadingState, setLoading] = useState(true);\n  const [iframeMedia, setIframeMedia] = useState(null);\n  const [isError, setIsError] = useState(false);\n  const isLoadingUndefined = useMemo(() => loading === undefined, [loading]);\n  const [apiUrl, apiUrlProps] = useMemo(() => getApiUrl(_objectSpread(_objectSpread({}, props), {}, {\n    media: mediaProps\n  })), [mediaProps, props]);\n  const isLazyEnabled = useMemo(() => isLazySupported && (lazy === true || isObject(lazy)), [lazy]);\n  const lazyOptions = useMemo(() => isObject(lazy) ? lazy : undefined, [lazy]);\n  const [hasIntersected, cardRef] = useIntersectionObserver(isLazyEnabled, lazyOptions);\n  const canFetchData = useMemo(() => !isLazyEnabled || isLazyEnabled && hasIntersected, [isLazyEnabled, hasIntersected]);\n  const mergeData = useCallback(fetchedData => {\n    const payload = isFunction(setData) ? setData(fetchedData) : _objectSpread(_objectSpread({}, fetchedData), setData);\n    const {\n      title,\n      description,\n      url,\n      video,\n      audio,\n      image,\n      logo,\n      iframe\n    } = payload;\n    const mediaFallback = image || logo || {};\n    let media = mediaFallback;\n    let videoUrl;\n    let audioUrl;\n    let isVideo = false;\n    let isAudio = false;\n    const preferredMedia = getPreferredMedia(payload, mediaProps);\n    switch (preferredMedia) {\n      case 'audio':\n        isAudio = true;\n        audioUrl = getUrlPath(audio);\n        break;\n      case 'video':\n        isVideo = true;\n        videoUrl = getUrlPath(video);\n        break;\n      case 'iframe':\n        setIframeMedia(iframe);\n        break;\n      default:\n        media = someProp(payload, mediaProps) || mediaFallback;\n        break;\n    }\n    const imageUrl = getUrlPath(media);\n    const {\n      color,\n      background_color: backgroundColor\n    } = media;\n    updateState({\n      url,\n      color,\n      title,\n      description,\n      imageUrl,\n      videoUrl,\n      audioUrl,\n      isVideo,\n      isAudio,\n      backgroundColor\n    });\n    setLoading(false);\n  }, [updateState, mediaProps, setData]);\n  const toFetchData = useCallback(() => {\n    if (canFetchData) {\n      setLoading(true);\n      const fetch = fetchData ? fetchFromApi(apiUrl, apiUrlProps) : Promise.resolve({});\n      fetch.then(_ref => {\n        let {\n          data\n        } = _ref;\n        return mergeData(data);\n      }).catch(error => {\n        setLoading(false);\n        setIsError(true);\n        console.error(`\n┌───────────────┐\n│ Microlink SDK │\n└───────────────┘\n\n${error.description}\n\n${JSON.stringify(error.data)}\n\nid   ${error.headers['x-request-id']}\nuri  ${error.url}\ncode ${error.code} (${error.statusCode})\n\nmicrolink.io/${error.code.toLowerCase()}\n`);\n      });\n    }\n  }, [apiUrlProps, fetchData, apiUrl, mergeData, canFetchData]);\n  useEffect(toFetchData, [url, setData, hasIntersected]);\n  const isLoading = isLoadingUndefined ? loadingState : loading;\n  if (isError) {\n    return /*#__PURE__*/React.createElement(\"a\", _extends({\n      href: url\n    }, restProps), url);\n  }\n  if (iframeMedia) {\n    if (!isSSR) {\n      iframeMedia.scripts.forEach(attrs => {\n        const hasScript = document.querySelector(`script[src=\"${attrs.src}\"]`);\n        if (!hasScript) {\n          const script = document.createElement('script');\n          Object.keys(attrs).forEach(key => script[key] = attrs[key]);\n          document.body.appendChild(script);\n        }\n      });\n    }\n    return /*#__PURE__*/React.createElement(\"div\", _extends({\n      className: classNames.iframe,\n      dangerouslySetInnerHTML: {\n        __html: iframeMedia.html\n      }\n    }, restProps));\n  }\n  return /*#__PURE__*/React.createElement(CardWrap, _extends({\n    className: `${classNames.main} ${className}`.trim(),\n    href: url,\n    $isLoading: isLoading,\n    ref: cardRef\n  }, restProps), isLoading ? _CardEmpty || (_CardEmpty = /*#__PURE__*/React.createElement(CardEmptyState, null)) : /*#__PURE__*/React.createElement(React.Fragment, null, _CardMedia || (_CardMedia = /*#__PURE__*/React.createElement(CardMedia, null)), _CardContent || (_CardContent = /*#__PURE__*/React.createElement(CardContent, null))));\n};\nconst Microlink = props => /*#__PURE__*/React.createElement(GlobalState, props, otherProps => /*#__PURE__*/React.createElement(Card, otherProps));\nMicrolink.defaultProps = {\n  className: '',\n  apiKey: undefined,\n  autoPlay: true,\n  controls: true,\n  direction: 'ltr',\n  lazy: true,\n  loop: true,\n  media: ['iframe', 'video', 'audio', 'image', 'logo'],\n  fetchData: true,\n  muted: true,\n  playsInline: true,\n  size: 'normal'\n};\n\nexport { Microlink as default, getApiUrl, imageProxy };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}